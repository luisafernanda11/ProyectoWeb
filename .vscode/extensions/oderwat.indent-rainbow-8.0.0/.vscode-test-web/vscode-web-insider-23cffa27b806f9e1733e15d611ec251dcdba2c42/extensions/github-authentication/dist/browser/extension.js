/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var r=n(4867),i=n(6026),o=n(4372),a=n(5327),s=n(4097),c=n(4109),u=n(7985),l=n(5061);e.exports=function(e){return new Promise((function(t,n){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(h+":"+g)}var m=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),a(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,n,o),p=null}},p.onabort=function(){p&&(n(l("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var v=(e.withCredentials||u(m))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;v&&(d[e.xsrfHeaderName]=v)}if("setRequestHeader"in p&&r.forEach(d,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),f||(f=null),p.send(f)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),i=n(1849),o=n(321),a=n(7185);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=s(n(5655));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(5263),c.CancelToken=n(4972),c.isCancel=n(6502),c.all=function(e){return Promise.all(e)},c.spread=n(8713),c.isAxiosError=n(6268),e.exports=c,e.exports.default=c},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var r=n(5263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(4867),i=n(5327),o=n(782),a=n(3572),s=n(7185);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},782:(e,t,n)=>{"use strict";var r=n(4867);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},4097:(e,t,n)=>{"use strict";var r=n(1793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},5061:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},3572:(e,t,n)=>{"use strict";var r=n(4867),i=n(8527),o=n(6502),a=n(5655);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},7185:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(o,u),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=c(void 0,e[i])):n[i]=c(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=i.concat(o).concat(a).concat(s),f=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(f,u),n}},6026:(e,t,n)=>{"use strict";var r=n(5061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},5655:(e,t,n)=>{"use strict";var r=n(4867),i=n(6016),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n(5448)),s),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var r=n(4867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},6268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},4109:(e,t,n)=>{"use strict";var r=n(4867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4867:(e,t,n)=>{"use strict";var r=n(1849),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},3300:(e,t)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},4802:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6363);t.ExperimentationService=r.ExperimentationService},6363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4067),i=n(4234),o=n(5975);class a extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new r.TasApiFeatureProvider(new i.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=a,a.REFRESH_RATE_IN_MINUTES=30},5975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3663),i=n(3334);class o extends r.ExperimentationServiceBase{constructor(e,t,n,r,o,a,s,c){if(super(e,r,o,a,s,c),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=n,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=a,this.storageKey=s,this.storage=c,n<1e3&&0!==n)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new i.PollingService(n),this.pollingService.OnPollTick((async()=>{await super.getFeaturesAsync()})))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},3663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7002);t.ExperimentationServiceBase=class{constructor(e,t,n,i,o,a){this.telemetry=e,this.featuresTelemetryPropertyName=t,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=a,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(a=new r.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise(((e,t)=>{this.resolveInitialFetchPromise=e}))}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise){try{await this.fetchPromise}catch(e){}return this.features}if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map((async e=>await e.getFeatures())));try{const t=await this.fetchPromise;this.updateFeatures(t,e)}catch(e){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,t=!1){let n={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)n.features.includes(e)||n.features.push(e);for(let e of t.configs){const t=n.configs.find((t=>t.Id===e.Id));t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):n.configs.push(e)}n.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`),null===(n=this.features.configs.find((t=>t.Id===e)))||void 0===n?void 0:n.Parameters[t]}async getTreatmentVariableAsync(e,t,n){if(n){const n=this.featuresConsumed,r=this.getTreatmentVariable(e,t);if(void 0!==r)return r;this.featuresConsumed=n}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},69:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},4e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(69);class i extends r.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let n=t.getFilters();for(let t of n.keys()){let r=n.get(t);e.set(t,r)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=i},4067:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4e3);class i extends r.FilteredFeatureProvider{constructor(e,t,n){super(t,n),this.httpClient=e,this.telemetry=t,this.filterProviders=n}async fetch(){let e=this.getFilters(),t={};for(let n of e.keys()){const r=e.get(n);t[n]=r}let n=await this.httpClient.get({headers:t});e.keys.length>0&&this.PostEventToTelemetry(t);let r=n.data,i=r.Configs,o=[];for(let e of i)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const n=t+(e.Parameters[t]?"":"cf");o.includes(n)||o.push(n)}return{features:o,assignmentContext:r.AssignmentContext,configs:i}}}t.TasApiFeatureProvider=i},4234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9669);t.AxiosHttpClient=class{constructor(e){this.endpoint=e}get(e){return r.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}}},7002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},3334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then((()=>{})).catch((()=>{})),this.intervalHandle=setInterval((async()=>{await this.onTick()}),this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},3234:(e,t,n)=>{"use strict";n.r(t),n.d(t,{v1:()=>p,v3:()=>C,v4:()=>T,v5:()=>E});var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],s=0;s<256;++s)a.push((s+256).toString(16).substr(1));const c=function(e,t){var n=t||0,r=a;return(r[e[n+0]]+r[e[n+1]]+r[e[n+2]]+r[e[n+3]]+"-"+r[e[n+4]]+r[e[n+5]]+"-"+r[e[n+6]]+r[e[n+7]]+"-"+r[e[n+8]]+r[e[n+9]]+"-"+r[e[n+10]]+r[e[n+11]]+r[e[n+12]]+r[e[n+13]]+r[e[n+14]]+r[e[n+15]]).toLowerCase()};var u,l,f=0,d=0;const p=function(e,t,n){var r=t&&n||0,i=t||[],a=(e=e||{}).node||u,s=void 0!==e.clockseq?e.clockseq:l;if(null==a||null==s){var p=e.random||(e.rng||o)();null==a&&(a=u=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==s&&(s=l=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:d+1,m=h-f+(g-d)/1e4;if(m<0&&void 0===e.clockseq&&(s=s+1&16383),(m<0||h>f)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=h,d=g,l=s;var v=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;i[r++]=v>>>24&255,i[r++]=v>>>16&255,i[r++]=v>>>8&255,i[r++]=255&v;var y=h/4294967296*1e4&268435455;i[r++]=y>>>8&255,i[r++]=255&y,i[r++]=y>>>24&15|16,i[r++]=y>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var w=0;w<6;++w)i[r+w]=a[w];return t||c(i)};function h(e,t,n){function r(e,r,i,o){var a=i&&o||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(r)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(r)||16!==r.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var s=n(r.concat(e));if(s[6]=15&s[6]|t,s[8]=63&s[8]|128,i)for(var u=0;u<16;++u)i[a+u]=s[u];return i||c(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function g(e){return 14+(e+64>>>9<<4)+1}function m(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function v(e,t,n,r,i,o){return m((a=m(m(t,e),m(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function y(e,t,n,r,i,o,a){return v(t&n|~t&r,e,t,i,o,a)}function w(e,t,n,r,i,o,a){return v(t&r|n&~r,e,t,i,o,a)}function x(e,t,n,r,i,o,a){return v(t^n^r,e,t,i,o,a)}function I(e,t,n,r,i,o,a){return v(n^(t|~r),e,t,i,o,a)}const C=h("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[g(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,c=r,u=i,l=o;n=y(n,r,i,o,e[a],7,-680876936),o=y(o,n,r,i,e[a+1],12,-389564586),i=y(i,o,n,r,e[a+2],17,606105819),r=y(r,i,o,n,e[a+3],22,-1044525330),n=y(n,r,i,o,e[a+4],7,-176418897),o=y(o,n,r,i,e[a+5],12,1200080426),i=y(i,o,n,r,e[a+6],17,-1473231341),r=y(r,i,o,n,e[a+7],22,-45705983),n=y(n,r,i,o,e[a+8],7,1770035416),o=y(o,n,r,i,e[a+9],12,-1958414417),i=y(i,o,n,r,e[a+10],17,-42063),r=y(r,i,o,n,e[a+11],22,-1990404162),n=y(n,r,i,o,e[a+12],7,1804603682),o=y(o,n,r,i,e[a+13],12,-40341101),i=y(i,o,n,r,e[a+14],17,-1502002290),n=w(n,r=y(r,i,o,n,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=w(o,n,r,i,e[a+6],9,-1069501632),i=w(i,o,n,r,e[a+11],14,643717713),r=w(r,i,o,n,e[a],20,-373897302),n=w(n,r,i,o,e[a+5],5,-701558691),o=w(o,n,r,i,e[a+10],9,38016083),i=w(i,o,n,r,e[a+15],14,-660478335),r=w(r,i,o,n,e[a+4],20,-405537848),n=w(n,r,i,o,e[a+9],5,568446438),o=w(o,n,r,i,e[a+14],9,-1019803690),i=w(i,o,n,r,e[a+3],14,-187363961),r=w(r,i,o,n,e[a+8],20,1163531501),n=w(n,r,i,o,e[a+13],5,-1444681467),o=w(o,n,r,i,e[a+2],9,-51403784),i=w(i,o,n,r,e[a+7],14,1735328473),n=x(n,r=w(r,i,o,n,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=x(o,n,r,i,e[a+8],11,-2022574463),i=x(i,o,n,r,e[a+11],16,1839030562),r=x(r,i,o,n,e[a+14],23,-35309556),n=x(n,r,i,o,e[a+1],4,-1530992060),o=x(o,n,r,i,e[a+4],11,1272893353),i=x(i,o,n,r,e[a+7],16,-155497632),r=x(r,i,o,n,e[a+10],23,-1094730640),n=x(n,r,i,o,e[a+13],4,681279174),o=x(o,n,r,i,e[a],11,-358537222),i=x(i,o,n,r,e[a+3],16,-722521979),r=x(r,i,o,n,e[a+6],23,76029189),n=x(n,r,i,o,e[a+9],4,-640364487),o=x(o,n,r,i,e[a+12],11,-421815835),i=x(i,o,n,r,e[a+15],16,530742520),n=I(n,r=x(r,i,o,n,e[a+2],23,-995338651),i,o,e[a],6,-198630844),o=I(o,n,r,i,e[a+7],10,1126891415),i=I(i,o,n,r,e[a+14],15,-1416354905),r=I(r,i,o,n,e[a+5],21,-57434055),n=I(n,r,i,o,e[a+12],6,1700485571),o=I(o,n,r,i,e[a+3],10,-1894986606),i=I(i,o,n,r,e[a+10],15,-1051523),r=I(r,i,o,n,e[a+1],21,-2054922799),n=I(n,r,i,o,e[a+8],6,1873313359),o=I(o,n,r,i,e[a+15],10,-30611744),i=I(i,o,n,r,e[a+6],15,-1560198380),r=I(r,i,o,n,e[a+13],21,1309151649),n=I(n,r,i,o,e[a+4],6,-145523070),o=I(o,n,r,i,e[a+11],10,-1120210379),i=I(i,o,n,r,e[a+2],15,718787259),r=I(r,i,o,n,e[a+9],21,-343485551),n=m(n,s),r=m(r,c),i=m(i,u),o=m(o,l)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(g(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))})),T=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){for(var i=n||0,a=0;a<16;++a)t[i+a]=r[a];return t}return c(r)};function b(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function S(e,t){return e<<t|e>>>32-t}const E=h("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<a;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=s[f][p];for(var h=16;h<80;++h)d[h]=S(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);for(var g=n[0],m=n[1],v=n[2],y=n[3],w=n[4],x=0;x<80;++x){var I=Math.floor(x/20),C=S(g,5)+b(I,m,v,y)+w+t[I]+d[x]>>>0;w=y,y=v,v=S(m,30)>>>0,m=g,g=C}n[0]=n[0]+g>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}))},2374:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>wo});var r=n(7549),i=Object.defineProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&c(e,n,t[n]);if(o)for(var n of o(t))s.call(t,n)&&c(e,n,t[n]);return e},l="function",f="object",d="undefined",p="prototype",h="hasOwnProperty",g=Object,m=g[p],v=g.assign,y=g.create,w=g.defineProperty,x=m[h];function I(){return typeof globalThis!==d&&globalThis?globalThis:typeof self!==d&&self?self:typeof window!==d&&window?window:typeof global!==d&&global?global:null}function C(e){throw new TypeError(e)}function T(e){if(y)return y(e);if(null==e)return{};var t=typeof e;function n(){}return t!==f&&t!==l&&C("Object prototype may only be an Object:"+e),n[p]=e,new n}(I()||{}).Symbol,(I()||{}).Reflect;var b=v||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])m[h].call(t,i)&&(e[i]=t[i]);return e},S=function(e,t){return(S=g.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[h](n)&&(e[n]=t[n])})(e,t)};function E(e,t){function n(){this.constructor=e}typeof t!==l&&null!==t&&C("Class extends value "+String(t)+" is not a constructor or null"),S(e,t),e[p]=null===t?T(t):(n[p]=t[p],new n)}var P="constructor",_="prototype",k="function",A="_dynInstFuncs",N="_isDynProxy",R="_dynClass",L="_dynInstChk",M=L,D="_dfOpts",U="_unknown_",F="useBaseInst",O="setInstFuncs",V=Object,q=V.getPrototypeOf,B=0;function j(e,t){return e&&V[_].hasOwnProperty.call(e,t)}function H(e){return e&&(e===V[_]||e===Array[_])}function z(e){return H(e)||e===Function[_]}function G(e){if(e){if(q)return q(e);var t=e.__proto__||e[_]||(e[P]?e[P][_]:null);if(t)return t}return null}function K(e,t){var n=[],r=V.getOwnPropertyNames;if(r)n=r(e);else for(var i in e)"string"==typeof i&&j(e,i)&&n.push(i);if(n&&n.length>0)for(var o=0;o<n.length;o++)t(n[o])}function $(e,t,n){return t!==P&&typeof e[t]===k&&(n||j(e,t))}function W(e){throw new TypeError("DynamicProto: "+e)}function X(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function J(e,t,n,r){var i=null;if(e&&j(n,R)){var o=e[A]||{};if((i=(o[n[R]]||{})[t])||W("Missing ["+t+"] "+k),!i[L]&&!1!==o[M]){for(var a=!j(e,t),s=G(e),c=[];a&&s&&!z(s)&&!X(c,s);){var u=s[t];if(u){a=u===r;break}c.push(s),s=G(s)}try{a&&(e[t]=i),i[L]=1}catch(e){o[M]=!1}}}return i}function Y(e,t,n){var r=t[e];return r===n&&(r=G(t)[e]),typeof r!==k&&W("["+e+"] is not a "+k),r}function Z(e,t){return j(e,_)?e.name||t||U:((e||{})[P]||{}).name||t||U}function Q(e,t,n,r){j(e,_)||W("theClass is an invalid class definition.");var i=e[_];(function(e,t){if(q)for(var n=[],r=G(t);r&&!z(r)&&!X(n,r);){if(r===e)return!0;n.push(r),r=G(r)}return!1})(i,t)||W("["+Z(e)+"] is not in class hierarchy of ["+Z(t)+"]");var o=null;j(i,R)?o=i[R]:(o="_dynCls$"+Z(e,"_")+"$"+B,B++,i[R]=o);var a=Q[D],s=!!a[F];s&&r&&void 0!==r[F]&&(s=!!r[F]);var c=function(e){var t={};return K(e,(function(n){!t[n]&&$(e,n,!1)&&(t[n]=e[n])})),t}(t);n(t,function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[N]&&r){var o=e[A]||{};!1!==o[M]&&(i=(o[t[R]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};K(n,(function(e){o[e]=i(t,n,e)}));for(var a=G(e),s=[];a&&!z(a)&&!X(s,a);)K(a,(function(e){!o[e]&&$(a,e,!q)&&(o[e]=i(t,a,e))})),s.push(a),a=G(a);return o}(i,t,c,s));var u=!!q&&!!a[O];u&&r&&(u=!!r[O]),function(e,t,n,r,i){if(!H(e)){var o=n[A]=n[A]||{},a=o[t]=o[t]||{};!1!==o[M]&&(o[M]=!!i),K(n,(function(t){$(n,t,!1)&&n[t]!==r[t]&&(a[t]=n[t],delete n[t],(!j(e,t)||e[t]&&!e[t][N])&&(e[t]=function(e,t){var n=function(){return(J(this,t,e,n)||Y(t,e,n)).apply(this,arguments)};return n[N]=1,n}(e,t)))}))}}(i,o,t,c,!1!==u)}Q[D]={setInstFuncs:!0,useBaseInst:!0};var ee,te,ne=Q;(te=ee||(ee={}))[te.CRITICAL=1]="CRITICAL",te[te.WARNING=2]="WARNING";var re=40,ie="attachEvent",oe="addEventListener",ae="detachEvent",se="removeEventListener",ce=w;function ue(e){return m.toString.call(e)}function le(e){return void 0===e||typeof e===d}function fe(e){return null===e||le(e)}function de(e){return!fe(e)}function pe(e,t){return e&&x.call(e,t)}function he(e){return typeof e===f}function ge(e){return typeof e===l}function me(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!fe(e))try{fe(e[oe])?fe(e[ie])||(e[ie]("on"+t,n),i=!0):(e[oe](t,n,r),i=!0)}catch(e){}return i}function ve(e,t,n,r){if(void 0===r&&(r=!1),!fe(e))try{fe(e[se])?fe(e[ae])||e[ae]("on"+t,n):e[se](t,n,r)}catch(e){}}function ye(e,t){if(e)for(var n in e)x.call(e,n)&&t.call(e,n,e[n])}function we(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function xe(e){return"[object Array]"===ue(e)}function Ie(e){return"[object Error]"===ue(e)}function Ce(e){return"string"==typeof e}function Te(e){return"number"==typeof e}function be(e){if(function(e){return"[object Date]"===ue(e)}(e)){var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function Se(e,t,n){for(var r=e.length,i=0;i<r&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}function Ee(e,t,n){for(var r=e.length,i=n||0,o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===t)return o;return-1}function Pe(e,t,n){for(var r=e.length,i=n||e,o=new Array(r),a=0;a<r;a++)a in e&&(o[a]=t.call(i,e[a],e));return o}function _e(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}g.freeze,g.seal;var ke=!{toString:null}.propertyIsEnumerable("toString"),Ae=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Ne(e){var t=typeof e;t!==l&&(t!==f||null===e)&&C("objKeys called on non-object");var n=[];for(var r in e)e&&x.call(e,r)&&n.push(r);if(ke)for(var i=Ae.length,o=0;o<i;o++)e&&x.call(e,Ae[o])&&n.push(Ae[o]);return n}function Re(e,t,n,r){if(ce)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),ce(e,t,i),!0}catch(e){}return!1}function Le(){var e=Date;return e.now?e.now():(new e).getTime()}function Me(e){return Ie(e)?e.name:""}function De(e,t,n,r,i){var o=n;return e&&(o=e[t])!==n&&(!i||i(o))&&(!r||r(n))&&(o=n,e[t]=o),o}function Ue(e,t,n){var r;return e?!(r=e[t])&&fe(r)&&(r=le(n)?{}:n,e[t]=r):r=le(n)?{}:n,r}function Fe(e){return!e}function Oe(e){return!!e}function Ve(e){throw new Error(e)}function qe(e){return e&&(e=g(v?v({},e):e)),e}var Be="window",je="JSON",He="msie",ze="trident/",Ge=null,Ke=null;function $e(e){var t=I();return t&&t[e]?t[e]:e===Be&&We()?window:null}function We(){return Boolean(typeof window===f&&window)}function Xe(){return We()?window:$e(Be)}function Je(){return Boolean(typeof document===f&&document)}function Ye(){return Je()?document:$e("document")}function Ze(){return Boolean(typeof navigator===f&&navigator)?navigator:$e("navigator")}function Qe(e){return typeof location===f&&location?location:$e("location")}function et(){return $e("performance")}function tt(){return Boolean(typeof JSON===f&&JSON||null!==$e(je))}function nt(){return tt()?JSON||$e(je):null}function rt(){var e=Ze();if(e&&(e.userAgent!==Ke||null===Ge)){var t=((Ke=e.userAgent)||"").toLowerCase();Ge=we(t,He)||we(t,ze)}return Ge}function it(e){if(void 0===e&&(e=null),!e){var t=Ze()||{};e=t?(t.userAgent||"").toLowerCase():""}var n=(e||"").toLowerCase();if(we(n,He))return parseInt(n.split(He)[1]);if(we(n,ze)){var r=parseInt(n.split(ze)[1]);if(r)return r+4}return null}function ot(e){var t=Object[p].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":tt()&&(n=nt().stringify(e)),t+n}function at(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var st=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i.messageId=e,i.message=(n?"AI: ":"AI (Internal): ")+e;var o="";tt()&&(o=nt().stringify(r));var a=(t?" message:"+at(t):"")+(r?" props:"+at(o):"");i.message+=a}return e.dataType="MessageData",e}();function ct(e,t){return(e||{}).logger||new ut(t)}var ut=function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};ne(e,this,(function(e){function i(e,n){var r=t[e];return fe(r)?n:r}fe(t)&&(t={}),e.consoleLoggingLevel=function(){return i("loggingLevelConsole",0)},e.telemetryLoggingLevel=function(){return i("loggingLevelTelemetry",1)},e.maxInternalMessageLimit=function(){return i("maxMessageLimit",25)},e.enableDebugExceptions=function(){return i("enableDebugExceptions",!1)},e.throwInternal=function(t,n,i,o,a){void 0===a&&(a=!1);var s=new st(n,i,a,o);if(e.enableDebugExceptions())throw s;if(!le(s.message)){var c=e.consoleLoggingLevel();if(a){var u=+s.messageId;!r[u]&&c>=ee.WARNING&&(e.warnToConsole(s.message),r[u]=!0)}else c>=ee.WARNING&&e.warnToConsole(s.message);e.logInternalMessage(t,s)}},e.warnToConsole=function(e){var t=typeof console!==d?console:$e("console");if(t){var n="log";t.warn&&(n="warn"),ge(t[n])&&t[n](e)}},e.resetInternalMessageCount=function(){n=0,r={}},e.logInternalMessage=function(t,i){if(!(n>=e.maxInternalMessageLimit())){var o=!0,a="AITR_"+i.messageId;if(r[a]?o=!1:r[a]=!0,o&&(t<=e.telemetryLoggingLevel()&&(e.queue.push(i),n++),n===e.maxInternalMessageLimit())){var s="Internal events throttle limit per PageView reached for this app.",c=new st(23,s,!1);e.queue.push(c),e.warnToConsole(s)}}}}))},lt=function(){function e(t,n,r){var i,o=this,a=!1;o.start=Le(),o.name=t,o.isAsync=r,o.isChildEvt=function(){return!1},ge(n)&&(a=Re(o,"payload",(function(){return!i&&ge(n)&&(i=n(),n=null),i}))),o.getCtx=function(t){return t?t===e.ParentContextKey||t===e.ChildrenContextKey?o[t]:(o.ctx||{})[t]:null},o.setCtx=function(t,n){t&&(t===e.ParentContextKey?(o[t]||(o.isChildEvt=function(){return!0}),o[t]=n):t===e.ChildrenContextKey?o[t]=n:(o.ctx=o.ctx||{})[t]=n)},o.complete=function(){var t=0,r=o.getCtx(e.ChildrenContextKey);if(xe(r))for(var i=0;i<r.length;i++){var s=r[i];s&&(t+=s.time)}o.time=Le()-o.start,o.exTime=o.time-t,o.complete=function(){},!a&&ge(n)&&(o.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),ft=function e(t){this.ctx={},ne(e,this,(function(e){e.create=function(e,t,n){return new lt(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},e.setCtx=function(t,n){t&&((e.ctx=e.ctx||{})[t]=n)},e.getCtx=function(t){return(e.ctx||{})[t]}}))},dt="CoreUtils.doPerf";function pt(e,t,n,r,i){if(e){var o=e;if(ge(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var a=void 0,s=o.getCtx(dt);try{if(a=o.create(t(),r,i)){if(s&&a.setCtx&&(a.setCtx(lt.ParentContextKey,s),s.getCtx&&s.setCtx)){var c=s.getCtx(lt.ChildrenContextKey);c||(c=[],s.setCtx(lt.ChildrenContextKey,c)),c.push(a)}return o.setCtx(dt,a),n(a)}}catch(e){a&&a.setCtx&&a.setCtx("exception",e)}finally{a&&o.fire(a),o.setCtx(dt,s)}}}return n()}var ht=function(e,t){var n=this,r=null,i=ge(e.processTelemetry),o=ge(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return r},n.setNext=function(e){r=e},n.processTelemetry=function(a,s){s||(s=t);var c=e?e.identifier:"TelemetryPluginChain";pt(s?s.core():null,(function(){return c+":processTelemetry"}),(function(){if(e&&i){n._hasRun=!0;try{s.setNext(r),o&&e.setNextPlugin(r),r&&(r._hasRun=!1),e.processTelemetry(a,s)}catch(n){var t=r&&r._hasRun;(!r||!t)&&s.diagLog().throwInternal(ee.CRITICAL,73,"Plugin ["+e.identifier+"] failed during processTelemetry - "+n),r&&!t&&r.processTelemetry(a,s)}}else r&&(n._hasRun=!0,r.processTelemetry(a,s))}),(function(){return{item:a}}),!a.sync)}};function gt(e,t){var n=[];if(e&&e.length>0)for(var r=null,i=0;i<e.length;i++){var o=e[i];if(o&&ge(o.processTelemetry)){var a=new ht(o,t);n.push(a),r&&r.setNext(a),r=a}}return n.length>0?n[0]:null}var mt=function e(t,n,r,i){var o=this,a=null;null!==i&&(t&&ge(t.getPlugin)?a=function(e,t,n){var r=[],i=!n;if(e)for(;e;){var o=e.getPlugin();(i||o===n)&&(i=!0,r.push(o)),e=e.getNext()}return i||r.push(n),gt(r,t)}(t,o,i||t.getPlugin()):i?a=function(e,t,n){var r=e,i=!1;return n&&e&&(r=[],Se(e,(function(e){(i||e===n)&&(i=!0,r.push(e))}))),n&&!i&&(r||(r=[]),r.push(n)),gt(r,t)}(t,o,i):le(i)&&(a=gt(t,o))),o.core=function(){return r},o.diagLog=function(){return ct(r,n)},o.getCfg=function(){return n},o.getExtCfg=function(e,t){var r;if(void 0===t&&(t={}),n){var i=n.extensionConfig;i&&e&&(r=i[e])}return r||t},o.getConfig=function(e,t,r){void 0===r&&(r=!1);var i,a=o.getExtCfg(e,null);return a&&!fe(a[t])?i=a[t]:n&&!fe(n[t])&&(i=n[t]),fe(i)?r:i},o.hasNext=function(){return null!=a},o.getNext=function(){return a},o.setNext=function(e){a=e},o.processNext=function(e){var t=a;t&&(a=t.getNext(),t.processTelemetry(e,o))},o.createNew=function(t,i){return void 0===t&&(t=null),new e(t||a,n,r,i)}},vt="extensionConfig",yt="getPlugin",wt=function(){function e(){var e=this,t=!1,n=null,r=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){r=e},e.processNext=function(e,t){t?t.processNext(e):r&&ge(r.processTelemetry)&&r.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var i=t;if(!i){var o=n||new mt(null,{},e.core);i=r&&r[yt]?o.createNew(null,r[yt]):o.createNew(null,r)}return i},e._baseTelInit=function(i,o,a,s){i&&De(i,vt,[],null,fe),!s&&o&&(s=o.getProcessTelContext().getNext());var c=r;r&&r[yt]&&(c=r[yt]()),e.core=o,n=new mt(s,i,o,c),t=!0}}return e.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},e}(),xt="processTelemetry",It="priority",Ct="setNextPlugin",Tt="isInitialized";function bt(e,t){for(var n=[],r=null,i=e.getNext();i;){var o=i.getPlugin();o&&(r&&ge(r[Ct])&&ge(o[xt])&&r[Ct](o),(!ge(o[Tt])||!o[Tt]())&&n.push(o),r=o,i=i.getNext())}Se(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function St(e){return e.sort((function(e,t){var n=0,r=ge(t[xt]);return ge(e[xt])?n=r?e[It]-t[It]:1:r&&(n=-1),n}))}var Et=function(e){function t(){var n,r=e.call(this)||this;function i(e){e&&e.length>0&&(function(e){Se(e,(function(e){e.priority<500&&Ve("Channel has invalid priority"+e.identifier)}))}(e=e.sort((function(e,t){return e.priority-t.priority}))),n.push(e))}return r.identifier="ChannelControllerPlugin",r.priority=500,ne(t,r,(function(e,t){e.setNextPlugin=function(e){},e.processTelemetry=function(e,t){n&&Se(n,(function(n){n.length>0&&r._getTelCtx(t).createNew(n).processNext(e)}))},e.getChannelControls=function(){return n},e.initialize=function(r,o,a){e.isInitialized()||(t.initialize(r,o,a),function(e,t){if(n=[],e&&Se(e,(function(e){return i(e)})),t){var r=[];Se(t,(function(e){e.priority>500&&r.push(e)})),i(r)}}((r||{}).channels,a),Se(n,(function(e){return bt(new mt(e,r,o),a)})))}})),r}return E(t,e),t._staticInit=(Re(n=t.prototype,"ChannelControls",n.getChannelControls),void Re(n,"channelQueue",n.getChannelControls)),t;var n}(wt),Pt="toGMTString",_t="toUTCString",kt="cookie",At="expires",Nt="enabled",Rt="isCookieUseDisabled",Lt="disableCookiesUsage",Mt="_ckMgr",Dt="",Ut=null,Ft=null,Ot=null,Vt=Ye(),qt={},Bt={};function jt(e){return!e||e.isEnabled()}function Ht(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r[Mt]?r[Mt]:zt(t)}return n||(n=function(e,t){var n=zt[Mt]||Bt[Mt];return n||(n=zt[Mt]=zt(e,t),Bt[Mt]=n),n}(t,(e||{}).logger)),n}function zt(e,t){var n=function(e){var t=e.cookieCfg=e.cookieCfg||{};if(De(t,"domain",e.cookieDomain,de,fe),De(t,"path",e.cookiePath||"/",null,fe),fe(t[Nt])){var n=void 0;le(e[Rt])||(n=!e[Rt]),le(e[Lt])||(n=!e[Lt]),t[Nt]=n}return t}(e||Bt),r=n.path||"/",i=n.domain,o=!1!==n[Nt],a={isEnabled:function(){var e=o&&Gt(t),n=Bt[Mt];return e&&n&&a!==n&&(e=jt(n)),e},setEnabled:function(e){o=!1!==e},set:function(e,t,o,s,c){if(jt(a)){var u={},l=_e(t||Dt),f=l.indexOf(";");if(-1!==f&&(l=_e(t.substring(0,f)),u=Kt(t.substring(f+1))),De(u,"domain",s||i,Oe,le),!fe(o)){var d=rt();if(le(u[At])){var p=Le()+1e3*o;if(p>0){var h=new Date;h.setTime(p),De(u,At,$t(h,d?Pt:_t)||$t(h,d?Pt:_t)||Dt,Oe)}}d||De(u,"max-age",Dt+o,null,le)}var g=Qe();g&&"https:"===g.protocol&&(De(u,"secure",null,null,le),null===Ft&&(Ft=!function(e){return!!Ce(e)&&!!(we(e,"CPU iPhone OS 12")||we(e,"iPad; CPU OS 12")||we(e,"Macintosh; Intel Mac OS X 10_14")&&we(e,"Version/")&&we(e,"Safari")||we(e,"Macintosh; Intel Mac OS X 10_14")&&function(e,t){if(e){var n=t.length,r=e.length;if(e===t)return!0;if(r>=n){for(var i=r-1,o=n-1;o>=0;o--){if(e[i]!=t[o])return!1;i--}return!0}}return!1}(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||we(e,"Chrome/5")||we(e,"Chrome/6")||we(e,"UnrealEngine")&&!we(e,"Chrome")||we(e,"UCBrowser/12")||we(e,"UCBrowser/11"))}((Ze()||{}).userAgent)),Ft&&De(u,"SameSite","None",null,le)),De(u,"path",c||r,null,le),(n.setCookie||Jt)(e,Wt(l,u))}},get:function(e){var t=Dt;return jt(a)&&(t=(n.getCookie||Xt)(e)),t},del:function(e,t){jt(a)&&a.purge(e,t)},purge:function(e,r){if(Gt(t)){var i=((o={}).path=r||"/",o[At]="Thu, 01 Jan 1970 00:00:01 GMT",o);rt()||(i["max-age"]="0"),(n.delCookie||Jt)(e,Wt(Dt,i))}var o}};return a[Mt]=a,a}function Gt(e){if(null===Ut){Ut=!1;try{Ut=void 0!==(Vt||{})[kt]}catch(t){e&&e.throwInternal(ee.WARNING,68,"Cannot access document.cookie - "+Me(t),{exception:ot(t)})}}return Ut}function Kt(e){var t={};return e&&e.length&&Se(_e(e).split(";"),(function(e){if(e=_e(e||Dt)){var n=e.indexOf("=");-1===n?t[e]=null:t[_e(e.substring(0,n))]=_e(e.substring(n+1))}})),t}function $t(e,t){return ge(e[t])?e[t]():null}function Wt(e,t){var n=e||Dt;return ye(t,(function(e,t){n+="; "+e+(fe(t)?Dt:"="+t)})),n}function Xt(e){var t=Dt;if(Vt){var n=Vt[kt]||Dt;Ot!==n&&(qt=Kt(n),Ot=n),t=_e(qt[e]||Dt)}return t}function Jt(e,t){Vt&&(Vt[kt]=e+"="+t)}var Yt="_notificationManager",Zt=function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;ne(e,this,(function(e){e.addNotificationListener=function(t){e.listeners.push(t)},e.removeNotificationListener=function(t){for(var n=Ee(e.listeners,t);n>-1;)e.listeners.splice(n,1),n=Ee(e.listeners,t)},e.eventsSent=function(t){Se(e.listeners,(function(e){e&&e.eventsSent&&setTimeout((function(){return e.eventsSent(t)}),0)}))},e.eventsDiscarded=function(t,n){Se(e.listeners,(function(e){e&&e.eventsDiscarded&&setTimeout((function(){return e.eventsDiscarded(t,n)}),0)}))},e.eventsSendRequest=function(t,n){Se(e.listeners,(function(e){if(e&&e.eventsSendRequest)if(n)setTimeout((function(){return e.eventsSendRequest(t,n)}),0);else try{e.eventsSendRequest(t,n)}catch(e){}}))},e.perfEvent=function(t){t&&(n||!t.isChildEvt())&&Se(e.listeners,(function(e){if(e&&e.perfEvent)if(t.isAsync)setTimeout((function(){return e.perfEvent(t)}),0);else try{e.perfEvent(t)}catch(e){}}))}}))},Qt=function(e){function t(){var n=e.call(this)||this;return ne(t,n,(function(e,t){function n(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],2)}e.initialize=function(e,n,r,i){t.initialize(e,n,r||new ut(e),i||new Zt(e))},e.track=function(r){pt(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),Ve("Invalid telemetry item")),function(e){if(fe(e.name))throw n(e),Error("telemetry name required")}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)},e.addNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.addNotificationListener(t)},e.removeNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.removeNotificationListener(t)},e.pollInternalLogs=function(t){var n=e.config.diagnosticLogInterval;return(!n||!(n>0))&&(n=1e4),setInterval((function(){var n=e.logger?e.logger.queue:[];Se(n,(function(n){var r={name:t||"InternalMessageId: "+n.messageId,iKey:e.config.instrumentationKey,time:be(new Date),baseType:st.dataType,baseData:{message:n.message}};e.track(r)})),n.length=0}),n)}})),n}return E(t,e),t}((function e(){var t,n,r,i,o,a=!1;ne(e,this,(function(e){e._extensions=new Array,n=new Et,e.logger=T({throwInternal:function(e,t,n,r,i){void 0===i&&(i=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),t=[],e.isInitialized=function(){return a},e.initialize=function(t,i,o,s){e.isInitialized()&&Ve("Core should not be initialized more than once"),(!t||fe(t.instrumentationKey))&&Ve("Please provide instrumentation key"),r=s,e[Yt]=s,e.config=t||{},t.extensions=fe(t.extensions)?[]:t.extensions,Ue(t,vt).NotificationManager=s,o&&(e.logger=o);var c=[];c.push.apply(c,i.concat(t.extensions)),c=St(c);var u=[],l=[],f={};Se(c,(function(e){(fe(e)||fe(e.initialize))&&Ve("Extensions must provide callback to initialize");var t=e.priority,r=e.identifier;e&&t&&(fe(f[t])?f[t]=r:o.warnToConsole("Two extensions have same priority #"+t+" - "+f[t]+", "+r)),!t||t<n.priority?u.push(e):l.push(e)})),c.push(n),u.push(n),c=St(c),e._extensions=c,bt(new mt([n],t,e),c),bt(new mt(u,t,e),c),e._extensions=u,0===e.getTransmissionControls().length&&Ve("No channels available"),a=!0,e.releaseQueue()},e.getTransmissionControls=function(){return n.getChannelControls()},e.track=function(n){De(n,"iKey",e.config.instrumentationKey,null,Fe),De(n,"time",be(new Date),null,Fe),De(n,"ver","4.0",null,fe),e.isInitialized()?e.getProcessTelContext().processNext(n):t.push(n)},e.getProcessTelContext=function(){var t=e._extensions,r=t;return(!t||0===t.length)&&(r=[n]),new mt(r,e.config,e)},e.getNotifyMgr=function(){return r||(r=T({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),e[Yt]=r),r},e.getCookieMgr=function(){return o||(o=zt(e.config,e.logger)),o},e.setCookieMgr=function(e){o=e},e.getPerfMgr=function(){return i||e.config&&e.config.enablePerfMgr&&(i=new ft(e.getNotifyMgr())),i},e.setPerfMgr=function(e){i=e},e.eventCnt=function(){return t.length},e.releaseQueue=function(){t.length>0&&(Se(t,(function(t){e.getProcessTelContext().processNext(t)})),t=[])}}))})),en=4294967296,tn=4294967295,nn=!1,rn=123456789,on=987654321;function an(e){var t,n=$e("crypto")||$e("msCrypto");return n&&n.getRandomValues?t=n.getRandomValues(new Uint32Array(1))[0]&tn:rt()?(nn||function(){try{var e=2147483647&Le();!function(e){e<0&&(e>>>=0),rn=123456789+e&tn,on=987654321-e&tn,nn=!0}((Math.random()*en^e)+e)}catch(e){}}(),t=function(e){var t=((on=36969*(65535&on)+(on>>16)&tn)<<16)+(65535&(rn=18e3*(65535&rn)+(rn>>16)&tn))>>>0&tn|0;return t>>>=0}()&tn):t=Math.floor(en*Math.random()|0),e||(t>>>=0),t}function sn(e,t){var n=!1,r=Xe();r&&(n=me(r,e,t),n=me(r.body,e,t)||n);var i=Ye();return i&&(n=ln.Attach(i,e,t)||n),n}function cn(e){void 0===e&&(e=22);for(var t=an()>>>0,n=0,r="";r.length<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(an()<<2&4294967295|3&t)>>>0,n=0);return r}function un(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=an())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&an())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}var ln={Attach:me,AttachEvent:me,Detach:ve,DetachEvent:ve},fn="_aiHooks",dn=["req","rsp","hkErr","fnErr"];function pn(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function hn(e,t,n,r,i){i>=0&&i<=2&&pn(e,(function(e,o){var a=e.cbks,s=a[dn[i]];if(s){t.ctx=function(){return r[o]=r[o]||{}};try{s.apply(t.inst,n)}catch(e){var c=t.err;try{var u=a[dn[2]];u&&(t.err=e,u.apply(t.inst,n))}catch(e){}finally{t.err=c}}}}))}var gn=Object.getPrototypeOf;function mn(e,t,n){var r=null;return e&&(pe(e,t)?r=e:n&&(r=mn(function(e){if(e){if(gn)return gn(e);var t=e.__proto__||e[p]||e.constructor;if(t)return t}return null}(e),t,!1))),r}function vn(e,t,n,r){if(void 0===r&&(r=!0),e&&t&&n){var i=mn(e,t,r);if(i){var o=i[t];if(typeof o===l){var a=o[fn];if(!a){var s=function(e){return function(){var t=this,n=arguments,r=e.h,i={name:e.n,inst:t,ctx:null,set:c},o=[],a=s([i],n);function s(e,t){return pn(t,(function(t){e.push(t)})),e}function c(e,t){(n=s([],n))[e]=t,a=s([i],n)}hn(r,i,a,o,0);var u=e.f;try{i.rslt=u.apply(t,n)}catch(e){throw i.err=e,hn(r,i,a,o,3),e}return hn(r,i,a,o,1),i.rslt}}(a={i:0,n:t,f:o,h:[]});s[fn]=a,i[t]=s}var c={id:a.i,cbks:n,rm:function(){var e=this.id;pn(a.h,(function(t,n){if(t.id===e)return a.h.splice(n,1),1}))}};return a.i++,a.h.push(c),c}}}return null}var yn="Request-Context",wn="appId=cid-v1:",xn="Request-Id",In="traceparent",Cn="Sdk-Context",Tn="appId";function bn(e,t,n){var r=t.length,i=function(e,t){var n;return t&&(t=_e(t.toString())).length>150&&(n=t.substring(0,150),e.throwInternal(ee.WARNING,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}(e,t);if(i.length!==r){for(var o=0,a=i;void 0!==n[a];)o++,a=i.substring(0,147)+Nn(o);i=a}return i}function Sn(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=_e(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(ee.WARNING,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function En(e,t){return An(e,t,2048,66)}function Pn(e,t){var n;return t&&t.length>32768&&(n=t.substring(0,32768),e.throwInternal(ee.WARNING,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function _n(e,t){if(t){var n={};ye(t,(function(t,r){if(he(r)&&tt())try{r=nt().stringify(r)}catch(t){e.throwInternal(ee.WARNING,49,"custom property is not valid",{exception:t},!0)}r=Sn(e,r,8192),t=bn(e,t,n),n[t]=r})),t=n}return t}function kn(e,t){if(t){var n={};ye(t,(function(t,r){t=bn(e,t,n),n[t]=r})),t=n}return t}function An(e,t,n,r){var i;return t&&(t=_e(t)).length>n&&(i=t.substring(0,n),e.throwInternal(ee.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function Nn(e){var t="00"+e;return t.substr(t.length-3)}function Rn(e){var t=null;if(ge(Event))t=new Event(e);else{var n=Ye();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}function Ln(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()}function Mn(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(o>0?o+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t}function Dn(){var e=Ze();return"sendBeacon"in e&&e.sendBeacon}var Un,Fn,On="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Vn="sampleRate",qn="ProcessLegacy",Bn="http.method",jn="not_specified";!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(Un||(Un={})),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(Fn||(Fn={}));var Hn=void 0,zn=void 0;function Gn(){return Wn()?Kn(Un.LocalStorage):null}function Kn(e){try{if(fe(I()))return null;var t=new Date,n=$e(e===Un.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(e){}return null}function $n(){return Xn()?Kn(Un.SessionStorage):null}function Wn(){return void 0===Hn&&(Hn=!!Kn(Un.LocalStorage)),Hn}function Xn(){return void 0===zn&&(zn=!!Kn(Un.SessionStorage)),zn}function Jn(e,t){var n=$n();if(null!==n)try{return n.getItem(t)}catch(t){zn=!1,e.throwInternal(ee.WARNING,2,"Browser failed read of session storage. "+Me(t),{exception:ot(t)})}return null}function Yn(e,t,n){var r=$n();if(null!==r)try{return r.setItem(t,n),!0}catch(t){zn=!1,e.throwInternal(ee.WARNING,4,"Browser failed write to session storage. "+Me(t),{exception:ot(t)})}return!1}var Zn=Ye()||{},Qn=0,er=[null,null,null,null,null];function tr(e){var t=Qn,n=er,r=n[t];return Zn.createElement?n[t]||(r=n[t]=Zn.createElement("a")):r={host:nr(e,!0)},r.href=e,++t>=n.length&&(t=0),Qn=t,r}function nr(e,t){var n=rr(e,t)||"";if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>3&&Ce(r[2])&&r[2].length>0)return r[2]+(r[3]||"")}return n}function rr(e,t){var n=null;if(e){var r=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>2&&Ce(r[2])&&r[2].length>0&&(n=r[2]||"",t&&r.length>2)){var i=(r[1]||"").toLowerCase(),o=r[3]||"";("http"===i&&":80"===o||"https"===i&&":443"===o)&&(o=""),n+=o}}return n}var ir=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"];function or(e){return-1!==ir.indexOf(e.toLowerCase())}var ar={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var i=tr(t).host.toLowerCase();if(i&&(-1!==i.indexOf(":443")||-1!==i.indexOf(":80"))&&(i=(rr(t,!0)||"").toLowerCase()),(!e||!e.enableCorsCorrelation)&&i&&i!==n)return!1;var o,a=e&&e.correlationHeaderDomains;if(a&&(Se(a,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));o=o||t.test(i)})),!o))return!1;var s=e&&e.correlationHeaderExcludedDomains;if(!s||0===s.length)return!0;for(r=0;r<s.length;r++)if(new RegExp(s[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(i))return!1;return i&&i.length>0},getCorrelationContext:function(e){if(e){var t=ar.getCorrelationContextValue(e,"appId");if(t&&t!==ar.correlationIdPrefix)return t}},getCorrelationContextValue:function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2===i.length&&i[0]===t)return i[1]}}};function sr(){var e=et();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return Le()}function cr(e,t){var n=null;return 0!==e&&0!==t&&!fe(e)&&!fe(t)&&(n=t-e),n}var ur=function(e){function t(){return e.call(this)||this}return E(t,e),t}((function(){})),lr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.name=Sn(t,r)||jn,i.data=n,i.time=be(new Date),i.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===i.sampleRate?4:1},tags:1,data:1},i}return E(t,e),t}((function(){this.ver=1,this.sampleRate=100,this.tags={}})),fr=function(){this.ver=2,this.properties={},this.measurements={}},dr=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.aiDataContract={ver:1,name:1,properties:0,measurements:0},o.name=Sn(t,n)||jn,o.properties=_n(t,r),o.measurements=kn(t,i),o}return E(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}(fr),pr="error",hr="stack",gr="stackDetails",mr="errorSrc",vr="message",yr="description";function wr(e,t){var n=e;return n&&!Ce(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),t&&(!n||"{}"===n)&&(n=ge(e.toString)?e.toString():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function xr(e,t){var n=e;return e&&((n=e[vr]||e[yr]||"")&&!Ce(n)&&(n=wr(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"").indexOf(t)&&(n=t+": "+n),n||""}function Ir(e){return e&&e.src&&Ce(e.src)&&e.obj&&xe(e.obj)}function Cr(e){var t=e||"";Ce(t)||(t=Ce(t[hr])?t[hr]:""+t);var n=t.split("\n");return{src:t,obj:n}}function Tr(e){var t=null;if(e)try{if(e[hr])t=Cr(e[hr]);else if(e[pr]&&e[pr][hr])t=Cr(e[pr][hr]);else if(e.exception&&e.exception[hr])t=Cr(e.exception[hr]);else if(Ir(e))t=e;else if(Ir(e[gr]))t=e[gr];else if(window.opera&&e[vr])t=function(e){for(var t=[],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e.message);else if(Ce(e))t=Cr(e);else{var n=e[vr]||e[yr]||"";Ce(e[mr])&&(n&&(n+="\n"),n+=" from "+e[mr]),n&&(t=Cr(n))}}catch(e){t=Cr(e)}return t||{src:"",obj:null}}function br(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,200})\(/.exec(e.constructor.toString());t=n&&n.length>1?n[1]:""}catch(e){}return t}function Sr(e){if(e)try{if(!Ce(e)){var t=br(e),n=wr(e,!1);return(!n||"{}"===n)&&(e[pr]&&(t=br(e=e[pr])),n=wr(e,!0)),0!==n.indexOf(t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var Er,Pr=function(e){function t(t,n,r,i,o,a){var s=e.call(this)||this;return s.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},function(e){return!!he(e)&&"ver"in e&&"exceptions"in e&&"properties"in e}(n)?(s.exceptions=n.exceptions,s.properties=n.properties,s.measurements=n.measurements,n.severityLevel&&(s.severityLevel=n.severityLevel),n.id&&(s.id=n.id),n.problemGroup&&(s.problemGroup=n.problemGroup),s.ver=2,fe(n.isManual)||(s.isManual=n.isManual)):(r||(r={}),s.exceptions=[new _r(t,n,r)],s.properties=_n(t,r),s.measurements=kn(t,i),o&&(s.severityLevel=o),a&&(s.id=a)),s}return E(t,e),t.CreateAutoException=function(e,t,n,r,i,o,a,s){var c=br(i||o||e);return{message:xr(e,c),url:t,lineNumber:n,columnNumber:r,error:Sr(i||o||e),evt:Sr(o||e),typeName:c,stackDetails:Tr(a||i||o),errorSrc:s}},t.CreateFromInterface=function(e,n,r,i){var o=n.exceptions&&Pe(n.exceptions,(function(t){return _r.CreateFromInterface(e,t)}));return new t(e,b({},n,{exceptions:o}),r,i)},t.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,i=e.severityLevel,o=(e.ver,e.problemGroup),a=e.id,s=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&Pe(t,(function(e){return e.toInterface()}))||void 0,severityLevel:i,properties:n,measurements:r,problemGroup:o,id:a,isManual:s}},t.CreateSimpleException=function(e,t,n,r,i,o){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=Sr,t}((function(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}})),_r=function(e){function t(t,n,r){var i=e.call(this)||this;if(i.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},function(e){return!!he(e)&&"hasFullStack"in e&&"typeName"in e}(n))i.typeName=n.typeName,i.message=n.message,i[hr]=n[hr],i.parsedStack=n.parsedStack,i.hasFullStack=n.hasFullStack;else{var o=n,a=o&&o.evt;Ie(o)||(o=o[pr]||a||o),i.typeName=Sn(t,br(o))||jn,i.message=Pn(t,xr(n||o,i.typeName))||jn;var s=n[gr]||Tr(n);i.parsedStack=function(e){var t,n=e.obj;if(n&&n.length>0){t=[];var r=0,i=0;if(Se(n,(function(e){var n=e.toString();if(kr.regex.test(n)){var o=new kr(n,r++);i+=o.sizeInBytes,t.push(o)}})),i>32768)for(var o=0,a=t.length-1,s=0,c=o,u=a;o<a;){if((s+=t[o].sizeInBytes+t[a].sizeInBytes)>32768){var l=u-c+1;t.splice(c,l);break}c=o,u=a,o++,a--}}return t}(s),i[hr]=function(e,t){var n;if(t){var r=""+t;r.length>32768&&(n=r.substring(0,32768),e.throwInternal(ee.WARNING,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}(t,function(e){var t="";return e&&(e.obj?Se(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(s)),i.hasFullStack=xe(i.parsedStack)&&i.parsedStack.length>0,r&&(r.typeName=r.typeName||i.typeName)}return i}return E(t,e),t.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&Pe(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[hr],parsedStack:e||void 0}},t.CreateFromInterface=function(e,n){var r=n.parsedStack instanceof Array&&Pe(n.parsedStack,(function(e){return kr.CreateFromInterface(e)}))||n.parsedStack;return new t(e,b({},n,{parsedStack:r}))},t}((function(){this.hasFullStack=!0,this.parsedStack=[]})),kr=function(e){function t(n,r){var i=e.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},"string"==typeof n){var o=n;i.level=r,i.method="<no_method>",i.assembly=_e(o),i.fileName="",i.line=0;var a=o.match(t.regex);a&&a.length>=5&&(i.method=_e(a[2])||i.method,i.fileName=_e(a[4]),i.line=parseInt(a[5])||0)}else i.level=n.level,i.method=n.method,i.assembly=n.assembly,i.fileName=n.fileName,i.line=n.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=t.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return E(t,e),t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}((function(){}));!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(Er||(Er={}));var Ar,Nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},t}return E(t,e),t}((function(){this.kind=Er.Measurement})),Rr=function(e){function t(t,n,r,i,o,a,s,c){var u=e.call(this)||this;u.aiDataContract={ver:1,metrics:1,properties:0};var l=new Nr;return l.count=i>0?i:void 0,l.max=isNaN(a)||null===a?void 0:a,l.min=isNaN(o)||null===o?void 0:o,l.name=Sn(t,n)||jn,l.value=r,u.metrics=[l],u.properties=_n(t,s),u.measurements=kn(t,c),u}return E(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}((function(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}})),Lr=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return E(t,e),t}(fr),Mr=function(e){function t(t,n,r,i,o,a,s){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},c.id=function(e,t){return t&&An(e,t,128,69).toString()}(t,s),c.url=En(t,r),c.name=Sn(t,n)||jn,isNaN(i)||(c.duration=Mn(i)),c.properties=_n(t,o),c.measurements=kn(t,a),c}return E(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}(Lr),Dr=function(e){function t(t,n,r,i,o,a,s,c,u,l,f,d){void 0===u&&(u="Ajax");var p=e.call(this)||this;p.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},p.id=n,p.duration=Mn(o),p.success=a,p.resultCode=s+"",p.type=Sn(t,u);var h=function(e,t,n,r){var i,o=r,a=r;if(t&&t.length>0){var s=tr(t);if(i=s.host,!o)if(null!=s.pathname){var c=0===s.pathname.length?"/":s.pathname;"/"!==c.charAt(0)&&(c="/"+c),a=s.pathname,o=Sn(e,n?n+" "+c:c)}else o=Sn(e,t)}else i=r,o=r;return{target:i,name:o,data:a}}(t,r,c,i);return p.data=En(t,i)||h.data,p.target=Sn(t,h.target),l&&(p.target=p.target+" | "+l),p.name=Sn(t,h.name),p.properties=_n(t,f),p.measurements=kn(t,d),p}return E(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}((function(){this.ver=2,this.success=!0,this.properties={},this.measurements={}})),Ur=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},n=n||jn,a.message=Pn(t,n),a.properties=_n(t,i),a.measurements=kn(t,o),r&&(a.severityLevel=r),a}return E(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}((function(){this.ver=2,this.properties={},this.measurements={}})),Fr=function(e){function t(t,n,r,i,o,a,s){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},c.url=En(t,r),c.name=Sn(t,n)||jn,c.properties=_n(t,o),c.measurements=kn(t,a),s&&(c.domProcessing=s.domProcessing,c.duration=s.duration,c.networkConnect=s.networkConnect,c.perfTotal=s.perfTotal,c.receivedResponse=s.receivedResponse,c.sentRequest=s.sentRequest),c}return E(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return E(t,e),t}(Lr)),Or=function(e){function t(t,n){var r=e.call(this)||this;return r.aiDataContract={baseType:1,baseData:1},r.baseType=t,r.baseData=n,r}return E(t,e),t}(ur);function Vr(e){var t="ai."+e+".";return function(e){return t+e}}!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(Ar||(Ar={}));var qr=Vr("application"),Br=Vr("device"),jr=Vr("location"),Hr=Vr("operation"),zr=Vr("session"),Gr=Vr("user"),Kr=Vr("cloud"),$r=Vr("internal"),Wr=function(e){function t(){return e.call(this)||this}return E(t,e),t}(function(e){return function(){var t=this;e&&ye(e,(function(e,n){t[e]=n}))}}({applicationVersion:qr("ver"),applicationBuild:qr("build"),applicationTypeId:qr("typeId"),applicationId:qr("applicationId"),applicationLayer:qr("layer"),deviceId:Br("id"),deviceIp:Br("ip"),deviceLanguage:Br("language"),deviceLocale:Br("locale"),deviceModel:Br("model"),deviceFriendlyName:Br("friendlyName"),deviceNetwork:Br("network"),deviceNetworkName:Br("networkName"),deviceOEMName:Br("oemName"),deviceOS:Br("os"),deviceOSVersion:Br("osVersion"),deviceRoleInstance:Br("roleInstance"),deviceRoleName:Br("roleName"),deviceScreenResolution:Br("screenResolution"),deviceType:Br("type"),deviceMachineName:Br("machineName"),deviceVMName:Br("vmName"),deviceBrowser:Br("browser"),deviceBrowserVersion:Br("browserVersion"),locationIp:jr("ip"),locationCountry:jr("country"),locationProvince:jr("province"),locationCity:jr("city"),operationId:Hr("id"),operationName:Hr("name"),operationParentId:Hr("parentId"),operationRootId:Hr("rootId"),operationSyntheticSource:Hr("syntheticSource"),operationCorrelationVector:Hr("correlationVector"),sessionId:zr("id"),sessionIsFirst:zr("isFirst"),sessionIsNew:zr("isNew"),userAccountAcquisitionDate:Gr("accountAcquisitionDate"),userAccountId:Gr("accountId"),userAgent:Gr("userAgent"),userId:Gr("id"),userStoreRegion:Gr("storeRegion"),userAuthUserId:Gr("authUserId"),userAnonymousUserAcquisitionDate:Gr("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Gr("authUserAcquisitionDate"),cloudName:Kr("name"),cloudRole:Kr("role"),cloudRoleVer:Kr("roleVer"),cloudRoleInstance:Kr("roleInstance"),cloudEnvironment:Kr("environment"),cloudLocation:Kr("location"),cloudDeploymentUnit:Kr("deploymentUnit"),internalNodeName:$r("nodeName"),internalSdkVersion:$r("sdkVersion"),internalAgentVersion:$r("agentVersion"),internalSnippet:$r("snippet"),internalSdkSrc:$r("sdkSrc")})),Xr=function(){function e(){}return e.create=function(e,t,n,r,i,o){if(n=Sn(r,n)||jn,fe(e)||fe(t)||fe(n))throw Error("Input doesn't contain all required fields");var a={name:n,time:be(new Date),iKey:"",ext:o||{},tags:[],data:{},baseType:t,baseData:e};return fe(i)||ye(i,(function(e,t){a.data[e]=t})),a},e}(),Jr="user",Yr="device",Zr="trace",Qr="app",ei=new Wr,ti="AppInsightsPropertiesPlugin",ni="AppInsightsChannelPlugin",ri=function e(t,n,r,i){ne(e,this,(function(e){var o,a=null,s=[],c=!1;function u(){r&&Se(r.getTransmissionControls(),(function(e){Se(e,(function(e){return e.flush(!0)}))}))}r&&(o=r.logger),e.trackPageView=function(e,r){var l=e.name;if(fe(l)||"string"!=typeof l){var f=Ye();l=e.name=f&&f.title||""}var d=e.uri;if(fe(d)||"string"!=typeof d){var p=Qe();d=e.uri=p&&p.href||""}if(!i.isPerformanceTimingSupported())return t.sendPageViewInternal(e,r),u(),void o.throwInternal(ee.WARNING,25,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var h,g,m=!1,v=i.getPerformanceTiming().navigationStart;v>0&&(h=cr(v,+new Date),i.shouldCollectDuration(h)||(h=void 0)),!fe(r)&&!fe(r.duration)&&(g=r.duration),(n||!isNaN(g))&&(isNaN(g)&&(r||(r={}),r.duration=h),t.sendPageViewInternal(e,r),u(),m=!0),r||(r={}),function(e){s.push(e),a||(a=setInterval((function(){var e=s.slice(0),t=!1;s=[],Se(e,(function(e){e()?t=!0:s.push(e)})),0===s.length&&(clearInterval(a),a=null),t&&u()}),100))}((function(){var n=!1;try{if(i.isPerformanceTimingDataReady()){n=!0;var a={name:l,uri:d};i.populatePageViewPerformanceEvent(a),a.isValid||m?(m||(r.duration=a.durationMs,t.sendPageViewInternal(e,r)),c||(t.sendPageViewPerformanceInternal(a,r),c=!0)):(r.duration=h,t.sendPageViewInternal(e,r))}else v>0&&cr(v,+new Date)>6e4&&(n=!0,m||(r.duration=6e4,t.sendPageViewInternal(e,r)))}catch(e){o.throwInternal(ee.CRITICAL,38,"trackPageView failed on page load calculation: "+Me(e),{exception:ot(e)})}return n}))}}))},ii=function(){function e(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}return e.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+ot(e))}},e.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+ot(e)),null}},e.prototype.startPageVisitTimer=function(e,t){try{if(Xn()){null!=Jn(this._logger,this.prevPageVisitDataKeyName)&&Ve("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new oi(e,t),r=nt().stringify(n);Yn(this._logger,this.prevPageVisitDataKeyName,r)}}catch(e){this._logger.warnToConsole("Call to start failed: "+ot(e))}},e.prototype.stopPageVisitTimer=function(){try{if(Xn()){var e=Le(),t=Jn(this._logger,this.prevPageVisitDataKeyName);if(t&&tt()){var n=nt().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,function(e,t){var n=$n();if(null!==n)try{n.removeItem(t)}catch(t){zn=!1,e.throwInternal(ee.WARNING,6,"Browser failed removal of session storage item. "+Me(t),{exception:ot(t)})}}(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+ot(e)),null}},e}(),oi=function(e,t){this.pageVisitStartTime=Le(),this.pageName=e,this.pageUrl=t},ai=function(){function e(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return e.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming(),r=0,i=0,o=0,a=0,s=0;(t||n)&&(t?(r=t.duration,i=0===t.startTime?t.connectEnd:cr(t.startTime,t.connectEnd),o=cr(t.requestStart,t.responseStart),a=cr(t.responseStart,t.responseEnd),s=cr(t.responseEnd,t.loadEventEnd)):(r=cr(n.navigationStart,n.loadEventEnd),i=cr(n.navigationStart,n.connectEnd),o=cr(n.requestStart,n.responseStart),a=cr(n.responseStart,n.responseEnd),s=cr(n.responseEnd,n.loadEventEnd)),0===r?this._logger.throwInternal(ee.WARNING,10,"error calculating page view performance.",{total:r,network:i,request:o,response:a,dom:s}):this.shouldCollectDuration(r,i,o,a,s)?r<Math.floor(i)+Math.floor(o)+Math.floor(a)+Math.floor(s)?this._logger.throwInternal(ee.WARNING,8,"client performance math error.",{total:r,network:i,request:o,response:a,dom:s}):(e.durationMs=r,e.perfTotal=e.duration=Mn(r),e.networkConnect=Mn(i),e.sentRequest=Mn(o),e.receivedResponse=Mn(a),e.domProcessing=Mn(s),e.isValid=!0):this._logger.throwInternal(ee.WARNING,45,"Invalid page load duration value. Browser perf data won't be sent.",{total:r,network:i,request:o,response:a,dom:s}))},e.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?et().timing:null},e.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?et().getEntriesByType("navigation")[0]:null},e.prototype.isPerformanceNavigationTimingSupported=function(){var e=et();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},e.prototype.isPerformanceTimingSupported=function(){var e=et();return e&&e.timing},e.prototype.isPerformanceTimingDataReady=function(){var e=et(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t.navigationStart>0&&t.responseStart>0&&t.requestStart>0&&t.loadEventEnd>0&&t.responseEnd>0&&t.connectEnd>0&&t.domLoading>0},e.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ze()||{},r=["googlebot","adsbot-google","apis-google","mediapartners-google"],i=n.userAgent,o=!1;if(i)for(var a=0;a<r.length;a++)o=o||-1!==i.toLowerCase().indexOf(r[a]);if(o)return!1;for(a=0;a<e.length;a++)if(e[a]<0||e[a]>=this.MAX_DURATION_ALLOWED)return!1;return!0},e}(),si="duration",ci="event";function ui(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var li=function(e){function t(){var n,r,i,o,a,s=e.call(this)||this;return s.identifier="ApplicationInsightsAnalytics",s.priority=180,s.autoRoutePVDelay=500,ne(t,s,(function(e,c){var u=Qe();o=u&&u.href||"",e.getCookieMgr=function(){return Ht(e.core)},e.processTelemetry=function(t,n){pt(e.core,(function(){return e.identifier+":processTelemetry"}),(function(){var r=!1,i=e._telemetryInitializers.length;n=e._getTelCtx(n);for(var o=0;o<i;++o){var a=e._telemetryInitializers[o];if(a)try{if(!1===a.apply(null,[t])){r=!0;break}}catch(e){n.diagLog().throwInternal(ee.CRITICAL,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Me(e),{exception:ot(e)},!0)}}r||e.processNext(t,n)}),(function(){return{item:t}}),!t.sync)},e.trackEvent=function(t,n){try{var r=Xr.create(t,dr.dataType,dr.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(ee.WARNING,39,"trackTrace failed, trace will not be collected: "+Me(t),{exception:ot(t)})}},e.startTrackEvent=function(t){try{n.start(t)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,29,"startTrackEvent failed, event will not be collected: "+Me(t),{exception:ot(t)})}},e.stopTrackEvent=function(t,r,i){try{n.stop(t,void 0,r)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,30,"stopTrackEvent failed, event will not be collected: "+Me(t),{exception:ot(t)})}},e.trackTrace=function(t,n){try{var r=Xr.create(t,Ur.dataType,Ur.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(ee.WARNING,39,"trackTrace failed, trace will not be collected: "+Me(t),{exception:ot(t)})}},e.trackMetric=function(t,n){try{var r=Xr.create(t,Rr.dataType,Rr.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,36,"trackMetric failed, metric will not be collected: "+Me(t),{exception:ot(t)})}},e.trackPageView=function(t,n){try{var r=t||{};e._pageViewManager.trackPageView(r,b({},r.properties,r.measurements,n)),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(r.name,r.uri)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,37,"trackPageView failed, page view will not be collected: "+Me(t),{exception:ot(t)})}},e.sendPageViewInternal=function(t,n,r){var i=Ye();i&&(t.refUri=void 0===t.refUri?i.referrer:t.refUri);var o=Xr.create(t,Mr.dataType,Mr.envelopeType,e.diagLog(),n,r);e.core.track(o)},e.sendPageViewPerformanceInternal=function(t,n,r){var i=Xr.create(t,Fr.dataType,Fr.envelopeType,e.diagLog(),n,r);e.core.track(i)},e.trackPageViewPerformance=function(t,n){try{e._pageViewPerformanceManager.populatePageViewPerformanceEvent(t),e.sendPageViewPerformanceInternal(t,n)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,37,"trackPageViewPerformance failed, page view will not be collected: "+Me(t),{exception:ot(t)})}},e.startTrackPage=function(t){try{if("string"!=typeof t){var n=Ye();t=n&&n.title||""}r.start(t)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,31,"startTrackPage failed, page view may not be collected: "+Me(t),{exception:ot(t)})}},e.stopTrackPage=function(t,n,i,o){try{if("string"!=typeof t){var a=Ye();t=a&&a.title||""}if("string"!=typeof n){var s=Qe();n=s&&s.href||""}r.stop(t,n,i,o),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(t,n)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,32,"stopTrackPage failed, page view will not be collected: "+Me(t),{exception:ot(t)})}},e.sendExceptionInternal=function(t,n,r){var i=t.exception||t.error||new Error(jn),o=new Pr(e.diagLog(),i,t.properties||n,t.measurements,t.severityLevel,t.id).toInterface(),a=Xr.create(o,Pr.dataType,Pr.envelopeType,e.diagLog(),n,r);e.core.track(a)},e.trackException=function(t,n){try{e.sendExceptionInternal(t,n)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,35,"trackException failed, exception will not be collected: "+Me(t),{exception:ot(t)})}},e._onerror=function(t){var n=t&&t.error,r=t&&t.evt;try{if(!r){var i=Xe();i&&(r=i[ci])}var o=t&&t.url||(Ye()||{}).URL,a=t.errorSrc||"window.onerror@"+o+":"+(t.lineNumber||0)+":"+(t.columnNumber||0),s={errorSrc:a,url:o,lineNumber:t.lineNumber||0,columnNumber:t.columnNumber||0,message:t.message};!function(e,t,n,r,i){return!i&&Ce(e)&&("Script error."===e||"Script error"===e)}(t.message,t.url,t.lineNumber,t.columnNumber,t.error)?(t.errorSrc||(t.errorSrc=a),e.trackException({exception:t,severityLevel:Ar.Error},s)):function(t,n){var r=Xr.create(t,Pr.dataType,Pr.envelopeType,e.diagLog(),n);e.core.track(r)}(Pr.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",o,t.lineNumber||0,t.columnNumber||0,n,r,null,a),s)}catch(t){var c=n?n.name+", "+n.message:"null";e.diagLog().throwInternal(ee.CRITICAL,11,"_onError threw exception while logging error, error will not be collected: "+Me(t),{exception:ot(t),errorString:c})}},e.addTelemetryInitializer=function(t){e._telemetryInitializers.push(t)},e.initialize=function(u,l,d,p){if(!e.isInitialized()){if(fe(l))throw Error("Error initializing");c.initialize(u,l,d,p),e.setInitialized(!1);var h=e._getTelCtx(),g=e.identifier;e.config=h.getExtCfg(g);var m=t.getDefaultConfig(u);void 0!==m&&ye(m,(function(t,n){e.config[t]=h.getConfig(g,t,n),void 0===e.config[t]&&(e.config[t]=n)})),e.config.isStorageUseDisabled&&(Hn=!1,zn=!1);var v={instrumentationKey:function(){return u.instrumentationKey},accountId:function(){return e.config.accountId||u.accountId},sessionRenewalMs:function(){return e.config.sessionRenewalMs||u.sessionRenewalMs},sessionExpirationMs:function(){return e.config.sessionExpirationMs||u.sessionExpirationMs},sampleRate:function(){return e.config.samplingPercentage||u.samplingPercentage},sdkExtension:function(){return e.config.sdkExtension||u.sdkExtension},isBrowserLinkTrackingEnabled:function(){return e.config.isBrowserLinkTrackingEnabled||u.isBrowserLinkTrackingEnabled},appId:function(){return e.config.appId||u.appId}};e._pageViewPerformanceManager=new ai(e.core),e._pageViewManager=new ri(s,e.config.overridePageViewDuration,e.core,e._pageViewPerformanceManager),e._pageVisitTimeManager=new ii(e.diagLog(),(function(t,n,r){return function(t,n,r){var i={PageName:t,PageUrl:n};e.trackMetric({name:"PageVisitTime",average:r,max:r,min:r,sampleCount:1},i)}(t,n,r)})),e._telemetryInitializers=e._telemetryInitializers||[],function(t){if(!t.isBrowserLinkTrackingEnabled()){var n=["/browserLinkSignalR/","/__browserLink/"];e._telemetryInitializers.push((function(e){if(e.baseType===Dr.dataType){var t=e.baseData;if(t)for(var r=0;r<n.length;r++)if(t.target&&t.target.indexOf(n[r])>=0)return!1}return!0}))}}(v),(n=new fi(e.diagLog(),"trackEvent")).action=function(t,n,r,i){i||(i={}),i[si]=r.toString(),e.trackEvent({name:t,properties:i})},(r=new fi(e.diagLog(),"trackPageView")).action=function(t,n,r,i,o){fe(i)&&(i={}),i[si]=r.toString();var a={name:t,uri:n,properties:i,measurements:o};e.sendPageViewInternal(a,i)};var y=Xe(),w=Boolean(typeof history===f&&history)?history:$e("history"),x=Qe(),I=s;if(!1===e.config.disableExceptionTracking&&!e.config.autoExceptionInstrumented&&y){var C=y.onerror;y.onerror=function(e,t,n,r,i){var o=y[ci],a=C&&C(e,t,n,r,i);return!0!==a&&I._onerror(Pr.CreateAutoException(e,t,n,r,i,o)),a},e.config.autoExceptionInstrumented=!0}if(!1===e.config.disableExceptionTracking&&!0===e.config.enableUnhandledPromiseRejectionTracking&&!e.config.autoUnhandledPromiseInstrumented&&y){var T="onunhandledrejection",b=y[T];y[T]=function(e){var t=y[ci],n=b&&b.call(y,e);return!0!==n&&I._onerror(Pr.CreateAutoException(e.reason.toString(),x?x.href:"",0,0,e,t)),n},e.config.autoUnhandledPromiseInstrumented=!0}if(!0===e.config.enableAutoRouteTracking&&w&&ge(w.pushState)&&ge(w.replaceState)&&y&&"undefined"!=typeof Event){var S=s;Se(d,(function(e){e.identifier===ti&&(i=e)})),w.pushState=(E=w.pushState,function(){var e=E.apply(this,arguments);return ui(y,Rn(S.config.namePrefix+"pushState")),ui(y,Rn(S.config.namePrefix+"locationchange")),e}),w.replaceState=function(e){return function(){var t=e.apply(this,arguments);return ui(y,Rn(S.config.namePrefix+"replaceState")),ui(y,Rn(S.config.namePrefix+"locationchange")),t}}(w.replaceState),y.addEventListener&&(y.addEventListener(S.config.namePrefix+"popstate",(function(){ui(y,Rn(S.config.namePrefix+"locationchange"))})),y.addEventListener(S.config.namePrefix+"locationchange",(function(){if(i&&i.context&&i.context.telemetryTrace){i.context.telemetryTrace.traceID=un();var e="_unknown_";x&&x.pathname&&(e=x.pathname+(x.hash||"")),i.context.telemetryTrace.name=e}a&&(o=a),a=x&&x.href||"",setTimeout(function(e){S.trackPageView({refUri:e,properties:{duration:0}})}.bind(s,o),S.autoRoutePVDelay)})))}e.setInitialized(!0)}var E}})),s}return E(t,e),t.getDefaultConfig=function(e){return e||(e={}),e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=Ln(e.disableExceptionTracking),e.autoTrackPageVisitTime=Ln(e.autoTrackPageVisitTime),e.overridePageViewDuration=Ln(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=Ln(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.isStorageUseDisabled=Ln(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Ln(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=Ln(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e.enableDebug=Ln(e.enableDebug),e.disableFlushOnBeforeUnload=Ln(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=Ln(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e},t.Version="2.6.4",t}(wt),fi=function(e,t){var n=this,r={};n.start=function(t){void 0!==r[t]&&e.throwInternal(ee.WARNING,62,"start was called more than once for this event without calling stop.",{name:t,key:t},!0),r[t]=+new Date},n.stop=function(t,i,o,a){var s=r[t];if(isNaN(s))e.throwInternal(ee.WARNING,63,"stop was called without a corresponding start.",{name:t,key:t},!0);else{var c=cr(s,+new Date);n.action(t,i,c,o,a)}delete r[t],r[t]=void 0}},di=function e(t){var n=[];ne(e,this,(function(e){e.enqueue=function(e){n.push(e)},e.count=function(){return n.length},e.clear=function(){n.length=0},e.getItems=function(){return n.slice(0)},e.batchPayloads=function(e){return e&&e.length>0?t.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(t){e.clear()},e.clearSent=function(e){}}))},pi=function(){function e(t,n){var r,i=!1;ne(e,this,(function(o){var a=u(e.BUFFER_KEY),s=u(e.SENT_BUFFER_KEY);function c(e,t){var n=[];return Se(t,(function(t){!ge(t)&&-1===Ee(e,t)&&n.push(t)})),n}function u(e){var r=e;try{r=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+r:r;var i=Jn(t,r);if(i){var o=nt().parse(i);if(Ce(o)&&(o=nt().parse(o)),o&&xe(o))return o}}catch(e){t.throwInternal(ee.CRITICAL,42," storage key: "+r+", "+Me(e),{exception:ot(e)})}return[]}function l(e,r){var i=e;try{i=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+i:i;var o=JSON.stringify(r);Yn(t,i,o)}catch(e){Yn(t,i,JSON.stringify([])),t.throwInternal(ee.WARNING,41," storage key: "+i+", "+Me(e)+". Buffer cleared",{exception:ot(e)})}}(r=a.concat(s)).length>e.MAX_BUFFER_SIZE&&(r.length=e.MAX_BUFFER_SIZE),l(e.SENT_BUFFER_KEY,[]),l(e.BUFFER_KEY,r),o.enqueue=function(n){r.length>=e.MAX_BUFFER_SIZE?i||(t.throwInternal(ee.WARNING,67,"Maximum buffer size reached: "+r.length,!0),i=!0):(r.push(n),l(e.BUFFER_KEY,r))},o.count=function(){return r.length},o.clear=function(){r=[],l(e.BUFFER_KEY,[]),l(e.SENT_BUFFER_KEY,[]),i=!1},o.getItems=function(){return r.slice(0)},o.batchPayloads=function(e){return e&&e.length>0?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},o.markAsSent=function(n){r=c(n,r),l(e.BUFFER_KEY,r);var i=u(e.SENT_BUFFER_KEY);i instanceof Array&&n instanceof Array&&((i=i.concat(n)).length>e.MAX_BUFFER_SIZE&&(t.throwInternal(ee.CRITICAL,67,"Sent buffer reached its maximum size: "+i.length,!0),i.length=e.MAX_BUFFER_SIZE),l(e.SENT_BUFFER_KEY,i))},o.clearSent=function(t){var n=u(e.SENT_BUFFER_KEY);n=c(t,n),l(e.SENT_BUFFER_KEY,n)}}))}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(),hi="baseType",gi="baseData",mi="properties",vi="true";function yi(e,t,n){return De(e,t,n,Oe)}var wi=function(){function e(){}return e.extractPropsAndMeasurements=function(e,t,n){fe(e)||ye(e,(function(e,r){Te(r)?n[e]=r:Ce(r)?t[e]=r:tt()&&(t[e]=nt().stringify(r))}))},e.createEnvelope=function(t,n,r,i){var o=new lr(t,i,n);yi(o,"sampleRate",r[Vn]),(r[gi]||{}).startTime&&(o.time=be(r[gi].startTime)),o.iKey=r.iKey;var a=r.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",a),e.extractPartAExtensions(r,o),r.tags=r.tags||[],qe(o)},e.extractPartAExtensions=function(t,n){var r=n.tags=n.tags||{},i=t.ext=t.ext||{},o=t.tags=t.tags||[],a=i.user;a&&(yi(r,ei.userAuthUserId,a.authId),yi(r,ei.userId,a.id||a.localId));var s=i.app;s&&yi(r,ei.sessionId,s.sesId);var c=i.device;c&&(yi(r,ei.deviceId,c.id||c.localId),yi(r,ei.deviceType,c.deviceClass),yi(r,ei.deviceIp,c.ip),yi(r,ei.deviceModel,c.model),yi(r,ei.deviceType,c.deviceType));var u=t.ext.web;if(u){yi(r,ei.deviceLanguage,u.browserLang),yi(r,ei.deviceBrowserVersion,u.browserVer),yi(r,ei.deviceBrowser,u.browser);var l=n.data=n.data||{},f=l[gi]=l[gi]||{},d=f[mi]=f[mi]||{};yi(d,"domain",u.domain),yi(d,"isManual",u.isManual?vi:null),yi(d,"screenRes",u.screenRes),yi(d,"userConsent",u.userConsent?vi:null)}var p=i.os;p&&yi(r,ei.deviceOS,p.name);var h=i.trace;h&&(yi(r,ei.operationParentId,h.parentID),yi(r,ei.operationName,h.name),yi(r,ei.operationId,h.traceID));for(var g={},m=o.length-1;m>=0;m--)ye(o[m],(function(e,t){g[e]=t})),o.splice(m,1);ye(o,(function(e,t){g[e]=t}));var v=b({},r,g);v[ei.internalSdkVersion]||(v[ei.internalSdkVersion]="javascript:"+e.Version),n.tags=qe(v)},e.prototype.Init=function(e,t){this._logger=e,fe(t[gi])&&this._logger.throwInternal(ee.CRITICAL,46,"telemetryItem.baseData cannot be null.")},e.Version="2.6.4",e}(),xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[gi].measurements||{},i=n[gi][mi]||{};wi.extractPropsAndMeasurements(n.data,i,r);var o=n[gi];if(fe(o))return t.warnToConsole("Invalid input for dependency data"),null;var a=o[mi]&&o[mi][Bn]?o[mi][Bn]:"GET",s=new Dr(t,o.id,o.target,o.name,o.duration,o.success,o.responseCode,a,o.type,o.correlationContext,i,r),c=new Or(Dr.dataType,s);return wi.createEnvelope(t,Dr.envelopeType,n,c)},t.DependencyEnvelopeCreator=new t,t}(wi),Ii=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r={},i={};n[hi]!==dr.dataType&&(r.baseTypeSource=n[hi]),n[hi]===dr.dataType?(r=n[gi][mi]||{},i=n[gi].measurements||{}):n[gi]&&wi.extractPropsAndMeasurements(n[gi],r,i),wi.extractPropsAndMeasurements(n.data,r,i);var o=n[gi].name,a=new dr(t,o,r,i),s=new Or(dr.dataType,a);return wi.createEnvelope(t,dr.envelopeType,n,s)},t.EventEnvelopeCreator=new t,t}(wi),Ci=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[gi].measurements||{},i=n[gi][mi]||{};wi.extractPropsAndMeasurements(n.data,i,r);var o=n[gi],a=Pr.CreateFromInterface(t,o,i,r),s=new Or(Pr.dataType,a);return wi.createEnvelope(t,Pr.envelopeType,n,s)},t.ExceptionEnvelopeCreator=new t,t}(wi),Ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[gi],i=r[mi]||{},o=r.measurements||{};wi.extractPropsAndMeasurements(n.data,i,o);var a=new Rr(t,r.name,r.average,r.sampleCount,r.min,r.max,i,o),s=new Or(Rr.dataType,a);return wi.createEnvelope(t,Rr.envelopeType,n,s)},t.MetricEnvelopeCreator=new t,t}(wi),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r,i="duration",o=n[gi];fe(o)||fe(o[mi])||fe(o[mi][i])?!fe(n.data)&&!fe(n.data[i])&&(r=n.data[i],delete n.data[i]):(r=o[mi][i],delete o[mi][i]);var a,s=n[gi];((n.ext||{}).trace||{}).traceID&&(a=n.ext.trace.traceID);var c=s.id||a,u=s.name,l=s.uri,f=s[mi]||{},d=s.measurements||{};fe(s.refUri)||(f.refUri=s.refUri),fe(s.pageType)||(f.pageType=s.pageType),fe(s.isLoggedIn)||(f.isLoggedIn=s.isLoggedIn.toString()),fe(s[mi])||ye(s[mi],(function(e,t){f[e]=t})),wi.extractPropsAndMeasurements(n.data,f,d);var p=new Mr(t,u,l,r,f,d,c),h=new Or(Mr.dataType,p);return wi.createEnvelope(t,Mr.envelopeType,n,h)},t.PageViewEnvelopeCreator=new t,t}(wi),Si=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[gi],i=r.name,o=r.uri||r.url,a=r[mi]||{},s=r.measurements||{};wi.extractPropsAndMeasurements(n.data,a,s);var c=new Fr(t,i,o,void 0,a,s,r),u=new Or(Fr.dataType,c);return wi.createEnvelope(t,Fr.envelopeType,n,u)},t.PageViewPerformanceEnvelopeCreator=new t,t}(wi),Ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[gi].message,i=n[gi].severityLevel,o=n[gi][mi]||{},a=n[gi].measurements||{};wi.extractPropsAndMeasurements(n.data,o,a);var s=new Ur(t,r,i,o,a),c=new Or(Ur.dataType,s);return wi.createEnvelope(t,Ur.envelopeType,n,c)},t.TraceEnvelopeCreator=new t,t}(wi),Pi=function e(t){ne(e,this,(function(e){function n(e,o){var a="__aiCircularRefCheck",s={};if(!e)return t.throwInternal(ee.CRITICAL,48,"cannot serialize object because it is null or undefined",{name:o},!0),s;if(e[a])return t.throwInternal(ee.WARNING,50,"Circular reference detected while serializing object",{name:o},!0),s;if(!e.aiDataContract){if("measurements"===o)s=i(e,"number",o);else if("properties"===o)s=i(e,"string",o);else if("tags"===o)s=i(e,"string",o);else if(xe(e))s=r(e,o);else{t.throwInternal(ee.WARNING,49,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{nt().stringify(e),s=e}catch(e){t.throwInternal(ee.CRITICAL,48,e&&ge(e.toString)?e.toString():"Error serializing object",null,!0)}}return s}return e[a]=!0,ye(e.aiDataContract,(function(i,a){var c=ge(a)?1&a():1&a,u=ge(a)?4&a():4&a,l=2&a,f=void 0!==e[i],d=he(e[i])&&null!==e[i];if(!c||f||l){if(!u){var p;void 0!==(p=d?l?r(e[i],i):n(e[i],i):e[i])&&(s[i]=p)}}else t.throwInternal(ee.CRITICAL,24,"Missing required field specification. The field is required but not present on source",{field:i,name:o})})),delete e[a],s}function r(e,r){var i;if(e)if(xe(e)){i=[];for(var o=0;o<e.length;o++){var a=n(e[o],r+"["+o+"]");i.push(a)}}else t.throwInternal(ee.CRITICAL,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},ye(e,(function(e,o){if("string"===n)void 0===o?i[e]="undefined":null===o?i[e]="null":o.toString?i[e]=o.toString():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var a=parseFloat(o);isNaN(a)?i[e]="NaN":i[e]=a}else i[e]="invalid field: "+r+" is of unknown type.",t.throwInternal(ee.CRITICAL,i[e],null,!0)}))),i}e.serialize=function(e){var r=n(e,"root");try{return nt().stringify(r)}catch(e){t.throwInternal(ee.CRITICAL,48,e&&ge(e.toString)?e.toString():"Error serializing object",null,!0)}}}))},_i=function(){function e(){var t=Xe(),n=Ye(),r=!1,i=!0;ne(e,this,(function(e){try{if(t&&ln.Attach(t,"online",s)&&(ln.Attach(t,"offline",c),r=!0),n){var o=n.body||n;le(o.ononline)||(o.ononline=s,o.onoffline=c,r=!0)}if(r){var a=Ze();a&&!fe(a.onLine)&&(i=a.onLine)}}catch(e){r=!1}function s(){i=!0}function c(){i=!1}e.isListening=r,e.isOnline=function(){var e=!0,t=Ze();return r?e=i:t&&!fe(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}}))}return e.Offline=new e,e}().Offline,ki=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(t){if(""===t)return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,r=0;r<t.length;++r)n=(n<<5)+n+t.charCodeAt(r),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}(),Ai=function(){function e(){this.hashCodeGeneragor=new ki,this.keys=new Wr}return e.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},e}(),Ni=function(){function e(e,t){this.INT_MAX_VALUE=2147483647,this._logger=t||ct(null),(e>100||e<0)&&(this._logger.throwInternal(ee.WARNING,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new Ai}return e.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||t>=100||e.baseType===Rr.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},e}();function Ri(e){try{return e.responseText}catch(e){}return null}var Li=function(e){function t(){var n=e.call(this)||this;n.priority=1001,n.identifier=ni,n._XMLHttpRequestSupported=!1;var r,i,o,a,s,c={};return ne(t,n,(function(e,u){function l(){Ve("Method not implemented.")}function f(t,n,i,o,a,s){var c=null;if(e._appId||(c=v(s))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!p(i))return void e._onError(n,a);!e._senderConfig.isRetryDisabled()&&x(t)?(y(n),e.diagLog().throwInternal(ee.WARNING,re,". Response code "+t+". Will retry to send "+n.length+" items.")):e._onError(n,a)}else _i.isOffline()?e._senderConfig.isRetryDisabled()||(y(n,10),e.diagLog().throwInternal(ee.WARNING,re,". Offline - Response Code: "+t+". Offline status: "+_i.isOffline()+". Will retry to send "+n.length+" items.")):(p(i),206===t?(c||(c=v(s)),c&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(n,c):e._onError(n,a)):(r=0,e._onSuccess(n,o)))}function p(t){return!(s>=10||fe(t)||""===t||t===e._senderConfig.endpointUrl()||(e._senderConfig.endpointUrl=function(){return t},++s,0))}function h(t,n){var r=e._senderConfig.endpointUrl(),i=e._buffer.batchPayloads(t),o=new Blob([i],{type:"text/plain;charset=UTF-8"});Ze().sendBeacon(r,o)?(e._buffer.markAsSent(t),e._onSuccess(t,t.length)):(g(t,!0),e.diagLog().throwInternal(ee.WARNING,re,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function g(t,n){var r=new XMLHttpRequest,i=e._senderConfig.endpointUrl();try{r[On]=!0}catch(e){}r.open("POST",i,n),r.setRequestHeader("Content-type","application/json"),or(i)&&r.setRequestHeader(Cn,Tn),Se(Ne(c),(function(e){r.setRequestHeader(e,c[e])})),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,t,t.length)},r.onerror=function(n){return e._onError(t,I(r),n)};var o=e._buffer.batchPayloads(t);r.send(o),e._buffer.markAsSent(t)}function m(t,n){var r=e._senderConfig.endpointUrl(),i=e._buffer.batchPayloads(t),o=new Blob([i],{type:"text/plain;charset=UTF-8"}),a=new Headers;or(r)&&a.append(Cn,Tn),Se(Ne(c),(function(e){a.append(e,c[e])}));var s=new Request(r,{method:"POST",headers:a,body:o});fetch(s).then((function(n){if(!n.ok)throw Error(n.statusText);n.text().then((function(e){f(n.status,t,n.url,t.length,n.statusText,e)})),e._buffer.markAsSent(t)})).catch((function(n){e._onError(t,n.message)}))}function v(t){try{if(t&&""!==t){var n=nt().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors.length)return n}}catch(n){e.diagLog().throwInternal(ee.CRITICAL,43,"Cannot parse the response. "+Me(n),{response:t})}return null}function y(t,n){if(void 0===n&&(n=1),t&&0!==t.length){e._buffer.clearSent(t),r++;for(var o=0,a=t;o<a.length;o++){var s=a[o];e._buffer.enqueue(s)}(function(e){var t;if(r<=1)t=10;else{var n=(Math.pow(2,r)-1)/2,o=Math.floor(Math.random()*n*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var a=Le()+1e3*t;i=a})(n),w()}}function w(){if(!o){var t=i?Math.max(0,i-Le()):0,n=Math.max(e._senderConfig.maxBatchInterval(),t);o=setTimeout((function(){e.triggerSend(!0,null,1)}),n)}}function x(e){return 408===e||429===e||500===e||503===e}function I(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+Ri(e)||0:t}function C(t,n){var r=Xe(),i=new XDomainRequest;i.onload=function(){return e._xdrOnLoad(i,t)},i.onerror=function(n){return e._onError(t,T(i),n)};var o=r&&r.location&&r.location.protocol||"";if(0!==e._senderConfig.endpointUrl().lastIndexOf(o,0))return e.diagLog().throwInternal(ee.WARNING,re,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void e._buffer.clear();var a=e._senderConfig.endpointUrl().replace(/^(https?:)/,"");i.open("POST",a);var s=e._buffer.batchPayloads(t);i.send(s),e._buffer.markAsSent(t)}function T(e,t){return e?"XDomainRequest,Response:"+Ri(e)||0:t}e.pause=l,e.resume=l,e.flush=function(){try{e.triggerSend(!0,null,1)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,22,"flush failed, telemetry will not be collected: "+Me(t),{exception:ot(t)})}},e.onunloadFlush=function(){if(!1!==e._senderConfig.onunloadDisableBeacon()&&!1!==e._senderConfig.isBeaconApiDisabled()||!Dn())e.flush();else try{e.triggerSend(!0,h,2)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Me(t),{exception:ot(t)})}},e.teardown=l,e.addHeader=function(e,t){c[e]=t},e.initialize=function(o,c,l,f){u.initialize(o,c,l,f);var p=e._getTelCtx(),v=e.identifier;a=new Pi(c.logger),r=0,i=null,e._sender=null,s=0;var y=t._getDefaultAppInsightsChannelConfig();if(e._senderConfig=t._getEmptyAppInsightsChannelConfig(),ye(y,(function(t,n){e._senderConfig[t]=function(){return p.getConfig(v,t,n())}})),e._buffer=e._senderConfig.enableSessionStorageBuffer()&&Xn()?new pi(e.diagLog(),e._senderConfig):new di(e._senderConfig),e._sample=new Ni(e._senderConfig.samplingPercentage(),e.diagLog()),function(e){return!(fe(e.disableInstrumentationKeyValidation)||!e.disableInstrumentationKeyValidation)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e.instrumentationKey)}(o)||e.diagLog().throwInternal(ee.CRITICAL,100,"Invalid Instrumentation key "+o.instrumentationKey),!or(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders().length>0&&Se(e._senderConfig.customHeaders(),(function(e){n.addHeader(e.header,e.value)})),!e._senderConfig.isBeaconApiDisabled()&&Dn())e._sender=h;else{var w=$e("XMLHttpRequest");w?"withCredentials"in new w?(e._sender=g,e._XMLHttpRequestSupported=!0):typeof XDomainRequest!==d&&(e._sender=C):$e("fetch")&&(e._sender=m)}},e.processTelemetry=function(n,r){r=e._getTelCtx(r);try{if(e._senderConfig.disableTelemetry())return;if(!n)return void r.diagLog().throwInternal(ee.CRITICAL,7,"Cannot send empty telemetry");if(n.baseData&&!n.baseType)return void r.diagLog().throwInternal(ee.CRITICAL,70,"Cannot send telemetry without baseData and baseType");if(n.baseType||(n.baseType="EventData"),!e._sender)return void r.diagLog().throwInternal(ee.CRITICAL,28,"Sender was not initialized");if(!function(t){return e._sample.isSampledIn(t)}(n))return void r.diagLog().throwInternal(ee.WARNING,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample.sampleRate});n[Vn]=e._sample.sampleRate;var i=t.constructEnvelope(n,e._senderConfig.instrumentationKey(),r.diagLog());if(!i)return void r.diagLog().throwInternal(ee.CRITICAL,47,"Unable to create an AppInsights envelope");var o=!1;if(n.tags&&n.tags[qn]&&(Se(n.tags[qn],(function(e){try{e&&!1===e(i)&&(o=!0,r.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){r.diagLog().throwInternal(ee.CRITICAL,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Me(e),{exception:ot(e)},!0)}})),delete n.tags[qn]),o)return;var s=a.serialize(i),c=e._buffer.getItems(),u=e._buffer.batchPayloads(c);u&&u.length+s.length>e._senderConfig.maxBatchSizeInBytes()&&e.triggerSend(!0,null,10),e._buffer.enqueue(s),w()}catch(e){r.diagLog().throwInternal(ee.WARNING,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Me(e),{exception:ot(e)})}e.processNext(n,r)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&f(e.status,t,e.responseURL,n,I(e),Ri(e)||e.response)},e.triggerSend=function(t,r,a){void 0===t&&(t=!0);try{if(e._senderConfig.disableTelemetry())e._buffer.clear();else{if(e._buffer.count()>0){var s=e._buffer.getItems();(function(t,n){var r=function(){var t="getNotifyMgr";return e.core[t]?e.core[t]():e.core._notificationManager}();if(r&&r.eventsSendRequest)try{r.eventsSendRequest(t,n)}catch(t){e.diagLog().throwInternal(ee.CRITICAL,74,"send request notification failed: "+Me(t),{exception:ot(t)})}})(a||0,t),r?r.call(n,s,t):e._sender(s,t)}new Date}clearTimeout(o),o=null,i=null}catch(t){var c=it();(!c||c>9)&&e.diagLog().throwInternal(ee.CRITICAL,re,"Telemetry transmission failed, some telemetry will be lost: "+Me(t),{exception:ot(t)})}},e._onError=function(t,n,r){e.diagLog().throwInternal(ee.WARNING,26,"Failed to send telemetry.",{message:n}),e._buffer.clearSent(t)},e._onPartialSuccess=function(t,n){for(var r=[],i=[],o=0,a=n.errors.reverse();o<a.length;o++){var s=a[o],c=t.splice(s.index,1)[0];x(s.statusCode)?i.push(c):r.push(c)}t.length>0&&e._onSuccess(t,n.itemsAccepted),r.length>0&&e._onError(r,I(null,["partial success",n.itemsAccepted,"of",n.itemsReceived].join(" "))),i.length>0&&(y(i),e.diagLog().throwInternal(ee.WARNING,re,"Partial success. Delivered: "+t.length+", Failed: "+r.length+". Will retry to send "+i.length+" our of "+n.itemsReceived+" items"))},e._onSuccess=function(t,n){e._buffer.clearSent(t)},e._xdrOnLoad=function(t,n){var i=Ri(t);if(!t||i+""!="200"&&""!==i){var o=v(i);o&&o.itemsReceived&&o.itemsReceived>o.itemsAccepted&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(n,o):e._onError(n,T(t))}else r=0,e._onSuccess(n,0)}})),n}return E(t,e),t.constructEnvelope=function(e,t,n){var r;switch((r=t===e.iKey||fe(t)?e:b({},e,{iKey:t})).baseType){case dr.dataType:return Ii.EventEnvelopeCreator.Create(n,r);case Ur.dataType:return Ei.TraceEnvelopeCreator.Create(n,r);case Mr.dataType:return bi.PageViewEnvelopeCreator.Create(n,r);case Fr.dataType:return Si.PageViewPerformanceEnvelopeCreator.Create(n,r);case Pr.dataType:return Ci.ExceptionEnvelopeCreator.Create(n,r);case Rr.dataType:return Ti.MetricEnvelopeCreator.Create(n,r);case Dr.dataType:return xi.DependencyEnvelopeCreator.Create(n,r);default:return Ii.EventEnvelopeCreator.Create(n,r)}},t._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},t._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},t}(wt),Mi=function(){},Di=function(){function e(t,n){var r,i,o=ct(n),a=Ht(n);ne(e,this,(function(n){t||(t={}),ge(t.sessionExpirationMs)||(t.sessionExpirationMs=function(){return e.acquisitionSpan}),ge(t.sessionRenewalMs)||(t.sessionRenewalMs=function(){return e.renewalSpan}),n.config=t;var s=n.config.sessionCookiePostfix&&n.config.sessionCookiePostfix()?n.config.sessionCookiePostfix():n.config.namePrefix&&n.config.namePrefix()?n.config.namePrefix():"";function c(e,t){var n=!1,r=", session will be reset",i=t.split("|");if(i.length>=2)try{var a=+i[1]||0,s=+i[2]||0;isNaN(a)||a<=0?o.throwInternal(ee.WARNING,27,"AI session acquisition date is 0"+r):isNaN(s)||s<=0?o.throwInternal(ee.WARNING,27,"AI session renewal date is 0"+r):i[0]&&(e.id=i[0],e.acquisitionDate=a,e.renewalDate=s,n=!0)}catch(e){o.throwInternal(ee.CRITICAL,9,"Error parsing ai_session value ["+(t||"")+"]"+r+" - "+Me(e),{exception:ot(e)})}return n}function u(e,t){var o=e.acquisitionDate;e.renewalDate=t;var s,c=n.config,u=c.sessionRenewalMs(),l=o+c.sessionExpirationMs()-t,f=[e.id,o,t];s=l<u?l/1e3:u/1e3;var d=c.cookieDomain?c.cookieDomain():null;a.set(r(),f.join("|"),c.sessionExpirationMs()>0?s:null,d),i=t}r=function(){return"ai_session"+s},n.automaticSession=new Mi,n.update=function(){var t=Le(),s=!1,l=n.automaticSession;l.id||(s=!function(e,t){var n=!1,i=a.get(r());if(i&&ge(i.split))n=c(e,i);else{var s=function(e,t){var n=Gn();if(null!==n)try{return n.getItem(t)}catch(t){Hn=!1,e.throwInternal(ee.WARNING,1,"Browser failed read of local storage. "+Me(t),{exception:ot(t)})}return null}(o,r());s&&(n=c(e,s))}return n||!!e.id}(l));var f=n.config.sessionExpirationMs();if(!s&&f>0){var d=n.config.sessionRenewalMs(),p=t-l.acquisitionDate,h=t-l.renewalDate;s=(s=(s=p<0||h<0)||p>f)||h>d}s?function(e){var t=n.config||{},r=(t.getNewId?t.getNewId():null)||cn;n.automaticSession.id=r(t.idLength?t.idLength():22),n.automaticSession.acquisitionDate=e,u(n.automaticSession,e),Wn()||o.throwInternal(ee.WARNING,0,"Browser does not support local storage. Session durations will be inaccurate.")}(t):(!i||t-i>e.cookieUpdateInterval)&&u(l,t)},n.backup=function(){var e=n.automaticSession;!function(e,t,n){!function(e,t,n){var r=Gn();if(null!==r)try{r.setItem(t,n)}catch(t){Hn=!1,e.throwInternal(ee.WARNING,3,"Browser failed write to local storage. "+Me(t),{exception:ot(t)})}}(o,r(),[e,t,n].join("|"))}(e.id,e.acquisitionDate,e.renewalDate)}}))}return e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}(),Ui=function(){},Fi=function(){this.id="browser",this.deviceClass="Browser"},Oi=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.6.4"};function Vi(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))}var qi=function(){function e(t,n){this.isNewUser=!1;var r,i=ct(n),o=Ht(n);ne(e,this,(function(n){n.config=t;var a=n.config.userCookiePostfix&&n.config.userCookiePostfix()?n.config.userCookiePostfix():"";r=function(){return e.userCookieName+a};var s=o.get(r());if(s){n.isNewUser=!1;var c=s.split(e.cookieSeparator);c.length>0&&(n.id=c[0])}if(!n.id){var u=t||{},l=(u.getNewId?u.getNewId():null)||cn;n.id=l(u.idLength?t.idLength():22);var f=be(new Date);n.accountAcquisitionDate=f,n.isNewUser=!0;var d=[n.id,f];o.set(r(),d.join(e.cookieSeparator),31536e3);var p=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";!function(e,t){var n=Gn();if(null!==n)try{n.removeItem(t)}catch(t){Hn=!1,e.throwInternal(ee.WARNING,5,"Browser failed removal of local storage item. "+Me(t),{exception:ot(t)})}}(i,p)}n.accountId=t.accountId?t.accountId():void 0;var h=o.get(e.authUserCookieName);if(h){var g=(h=decodeURI(h)).split(e.cookieSeparator);g[0]&&(n.authenticatedId=g[0]),g.length>1&&g[1]&&(n.accountId=g[1])}n.setAuthenticatedUserContext=function(t,r,a){if(void 0===a&&(a=!1),!Vi(t)||r&&!Vi(r))i.throwInternal(ee.WARNING,60,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{n.authenticatedId=t;var s=n.authenticatedId;r&&(n.accountId=r,s=[n.authenticatedId,n.accountId].join(e.cookieSeparator)),a&&o.set(e.authUserCookieName,encodeURI(s))}},n.clearAuthenticatedUserContext=function(){n.authenticatedId=null,n.accountId=null,o.del(e.authUserCookieName)}}))}return e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}(),Bi=function(){},ji=function(e,t,n,r){var i=this;i.traceID=e||un(),i.parentID=t,i.name=n;var o=Qe();!n&&o&&o.pathname&&(i.name=o.pathname),i.name=Sn(r,i.name)},Hi="ext",zi="tags";function Gi(e,t){e&&e[t]&&0===Ne(e[t]).length&&delete e[t]}var Ki=function e(t,n){var r=this,i=t.logger;this.appId=function(){return null},ne(e,this,(function(e){e.application=new Ui,e.internal=new Oi(n),We()&&(e.sessionManager=new Di(n,t),e.device=new Fi,e.location=new Bi,e.user=new qi(n,t),e.telemetryTrace=new ji(void 0,void 0,void 0,i),e.session=new Mi),e.applySessionContext=function(t,n){var r=e.session,i=e.sessionManager;r&&Ce(r.id)?De(Ue(t.ext,Qr),"sesId",r.id):i&&i.automaticSession&&De(Ue(t.ext,Qr),"sesId",i.automaticSession.id,Ce)},e.applyOperatingSystemContxt=function(t,n){De(t.ext,"os",e.os)},e.applyApplicationContext=function(t,n){var r=e.application;if(r){var i=Ue(t,zi);De(i,ei.applicationVersion,r.ver,Ce),De(i,ei.applicationBuild,r.build,Ce)}},e.applyDeviceContext=function(t,n){var r=e.device;if(r){var i=Ue(Ue(t,Hi),Yr);De(i,"localId",r.id,Ce),De(i,"ip",r.ip,Ce),De(i,"model",r.model,Ce),De(i,"deviceClass",r.deviceClass,Ce)}},e.applyInternalContext=function(t,n){var r=e.internal;if(r){var i=Ue(t,zi);De(i,ei.internalAgentVersion,r.agentVersion,Ce),De(i,ei.internalSdkVersion,r.sdkVersion,Ce),(t.baseType===st.dataType||t.baseType===Mr.dataType)&&(De(i,ei.internalSnippet,r.snippetVer,Ce),De(i,ei.internalSdkSrc,r.sdkSrc,Ce))}},e.applyLocationContext=function(e,t){var n=r.location;n&&De(Ue(e,zi,[]),ei.locationIp,n.ip,Ce)},e.applyOperationContext=function(t,n){var r=e.telemetryTrace;if(r){var i=Ue(Ue(t,Hi),Zr,{traceID:void 0,parentID:void 0});De(i,"traceID",r.traceID,Ce),De(i,"name",r.name,Ce),De(i,"parentID",r.parentID,Ce)}},e.applyWebContext=function(e,t){var n=r.web;n&&De(Ue(e,Hi),"web",n)},e.applyUserContext=function(t,n){var r=e.user;if(r){De(Ue(t,zi,[]),ei.userAccountId,r.accountId,Ce);var i=Ue(Ue(t,Hi),Jr);De(i,"id",r.id,Ce),De(i,"authId",r.authenticatedId,Ce)}},e.cleanUp=function(e,t){var n=e.ext;n&&(Gi(n,Yr),Gi(n,Jr),Gi(n,"web"),Gi(n,"os"),Gi(n,Qr),Gi(n,Zr))}}))},$i=function(e){function t(){var n,r,i=e.call(this)||this;return i.priority=110,i.identifier=ti,ne(t,i,(function(e,i){e.initialize=function(o,a,s,c){i.initialize(o,a,s,c);var u=e._getTelCtx(),l=e.identifier,f=t.getDefaultConfig();r=r||{},ye(f,(function(e,t){r[e]=function(){return u.getConfig(l,e,t())}})),e.context=new Ki(a,r),n=function(e,t){var n=null;return Se(e,(function(e){if("AppInsightsChannelPlugin"===e.identifier)return n=e,-1})),n}(s),e.context.appId=function(){return n?n._appId:null},e._extConfig=r},e.processTelemetry=function(t,n){if(!fe(t)){n=e._getTelCtx(n),t.name===Mr.envelopeType&&n.diagLog().resetInternalMessageCount();var r=e.context||{};if(r.session&&"string"!=typeof e.context.session.id&&r.sessionManager&&r.sessionManager.update(),function(t,n){Ue(t,"tags",[]),Ue(t,"ext",{});var r=e.context;r.applySessionContext(t,n),r.applyApplicationContext(t,n),r.applyDeviceContext(t,n),r.applyOperationContext(t,n),r.applyUserContext(t,n),r.applyOperatingSystemContxt(t,n),r.applyWebContext(t,n),r.applyLocationContext(t,n),r.applyInternalContext(t,n),r.cleanUp(t,n)}(t,n),r.user&&r.user.isNewUser){r.user.isNewUser=!1;var i=new st(72,(Ze()||{}).userAgent||"");n.diagLog().logInternalMessage(ee.CRITICAL,i)}e.processNext(t,n)}}})),i}return E(t,e),t.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}}},t}(wt),Wi="properties";function Xi(e,t,n){var r=0,i=e[t],o=e[n];return i&&o&&(r=cr(i,o)),r}function Ji(e,t,n,r,i){var o=0,a=Xi(n,r,i);return a&&(o=Yi(e,t,Mn(a))),o}function Yi(e,t,n){var r="ajaxPerf",i=0;return e&&t&&n&&((e[r]=e[r]||{})[t]=n,i=1),i}var Zi=function(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1},Qi=function e(t,n,r){var i=this,o=r,a="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new Zi,i.clientFailure=0,i.traceID=t,i.spanID=n,ne(e,i,(function(e){e.getAbsoluteUrl=function(){return e.requestUrl?function(e){var t,n=tr(e);return n&&(t=n.href),t}(e.requestUrl):null},e.getPathName=function(){return e.requestUrl?En(o,function(e,t){return e?e.toUpperCase()+" "+t:t}(e.method,e.requestUrl)):null},e.CreateTrackItem=function(t,n,r){if(e.ajaxTotalDuration=Math.round(1e3*cr(e.requestSentTime,e.responseFinishedTime))/1e3,e.ajaxTotalDuration<0)return null;var i,o=((i={id:"|"+e.traceID+"."+e.spanID,target:e.getAbsoluteUrl(),name:e.getPathName(),type:t,startTime:null,duration:e.ajaxTotalDuration,success:+e.status>=200&&+e.status<400,responseCode:+e.status,method:e.method})[Wi]={HttpMethod:e.method},i);if(e.requestSentTime&&(o.startTime=new Date,o.startTime.setTime(e.requestSentTime)),function(e,t){var n=e.perfTiming,r=t[Wi]||{},i=0,o="name",a="Start",s="End",c="connect",u="redirect",l="request",f="response",d="duration",p="startTime",h=c+s,g=l+a,m=f+s,v=u+a,y=u=s,w="transferSize",x="encodedBodySize",I="decodedBodySize",C="serverTiming";if(n){i|=Ji(r,u,n,v,y),i|=Ji(r,"domainLookup",n,"domainLookupStart","domainLookupEnd"),i|=Ji(r,c,n,"connectStart",h),i|=Ji(r,l,n,g,"requestEnd"),i|=Ji(r,f,n,"responseStart",m),i|=Ji(r,"networkConnect",n,p,h),i|=Ji(r,"sentRequest",n,g,m);var T=n[d];T||(T=Xi(n,p,m)||0),i|=Yi(r,d,T),i|=Yi(r,"perfTotal",T);var b=n[C];if(b){var S={};Se(b,(function(e,t){var n=function(e){var t=e,n=/([^\w\d_$])/g;return n.test(e)&&(t=e.replace(n,"_")),t}(e[o]||""+t),r=S[n]||{};ye(e,(function(e,t){(e!==o&&Ce(t)||Te(t))&&(r[e]&&(t=r[e]+";"+t),(t||!Ce(t))&&(r[e]=t))})),S[n]=r})),i|=Yi(r,C,S)}i|=Yi(r,w,n[w]),i|=Yi(r,x,n[x]),i|=Yi(r,I,n[I])}else e.perfMark&&(i|=Yi(r,"missing",e.perfAttempts));i&&(t[Wi]=r)}(e,o),n&&Ne(e.requestHeaders).length>0&&(o[Wi]=o[Wi]||{},o[Wi].requestHeaders=e.requestHeaders),r){var s=r();if(s){var c=s.correlationContext;if(c&&(o.correlationContext=c),s.headerMap&&Ne(s.headerMap).length>0&&(o[Wi]=o[Wi]||{},o[Wi].responseHeaders=s.headerMap),e.status>=400){var u=s.type;o[Wi]=o[Wi]||{},(""===u||"text"===u)&&(o[Wi][a]=s[a]?s.statusText+" - "+s[a]:s.statusText),"json"===u&&(o[Wi][a]=s.response?s.statusText+" - "+JSON.stringify(s.response):s.statusText)}}}return o}}))},eo=function(){function e(t,n){var r=this;r.traceFlag=e.DEFAULT_TRACE_FLAG,r.version=e.DEFAULT_VERSION,t&&e.isValidTraceId(t)?r.traceId=t:r.traceId=un(),n&&e.isValidSpanId(n)?r.spanId=n:r.spanId=un().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.toString=function(){var e=this;return e.version+"-"+e.traceId+"-"+e.spanId+"-"+e.traceFlag},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}(),to="ai.ajxmn.",no="diagLog",ro="ajaxData",io="throwInternal",oo="fetch",ao=0;function so(e){var t="";try{!fe(e)&&!fe(e[ro])&&!fe(e[ro].requestUrl)&&(t+="(url: '"+e[ro].requestUrl+"')")}catch(e){}return t}function co(e,t,n,r,i){e[no]()[io](ee.CRITICAL,t,n,r,i)}function uo(e,t,n,r,i){e[no]()[io](ee.WARNING,t,n,r,i)}function lo(e,t,n){return function(r){co(e,t,n,{ajaxDiagnosticsMessage:so(r.inst),exception:ot(r.err)})}}function fo(e,t){return e&&t?e.indexOf(t):-1}var po,ho=function(e){function t(){var n=e.call(this)||this;n.identifier=t.identifier,n.priority=120;var r,i,o,a,s,c="trackDependencyDataInternal",u=Qe(),l=!1,f=!1,h=u&&u.host&&u.host.toLowerCase(),g=t.getEmptyConfig(),m=!1,v=0,y=!1,w=0,x=!1,C=[],T={};return ne(t,n,(function(e,n){function u(e){var t=!0;return(e||g.ignoreHeaders)&&Se(g.ignoreHeaders,(function(n){if(n.toLowerCase()===e.toLowerCase())return t=!1,-1})),t}function b(e,t,n){C.push(function(e,t,n){return e?vn(e[p],t,n,!1):null}(e,t,n))}function S(e,t,n){var r=!1,i=((Ce(t)?t:(t||{}).url||"")||"").toLowerCase();if(Se(s,(function(e){var t=e;Ce(e)&&(t=new RegExp(e)),r||(r=t.test(i))})),r)return r;var o=fo(i,"?"),a=fo(i,"#");return(-1===o||-1!==a&&a<o)&&(o=a),-1!==o&&(i=i.substring(0,o)),fe(e)?fe(t)||(r="object"==typeof t&&!0===t[On]||!!n&&!0===n[On]):r=!0===e[On]||!0===i[On],r?T[i]||(T[i]=1):T[i]&&(r=!0),r}function E(e,t){var n=!0,r=f;return fe(e)||(n=!0===t||!fe(e[ro])),r&&n}function P(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(e){}return null}function _(t){try{var n=t.getAllResponseHeaders();if(null!==n&&-1!==fo(n.toLowerCase(),"request-context")){var r=t.getResponseHeader(yn);return ar.getCorrelationContext(r)}}catch(n){uo(e,18,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:so(t),exception:ot(n)})}}function k(e,t){if(t.requestUrl&&a&&y){var n=et();if(n&&ge(n.mark)){ao++;var r=a+e+"#"+ao;n.mark(r);var i=n.getEntriesByName(r);i&&1===i.length&&(t.perfMark=i[0])}}}function A(e,t,n,r){var i=t.perfMark,o=et(),a=g.maxAjaxPerfLookupAttempts,s=g.ajaxPerfLookupDelay,c=t.requestUrl,u=0;!function l(){try{if(o&&i){u++;for(var f=null,d=o.getEntries(),p=d.length-1;p>=0;p--){var h=d[p];if(h){if("resource"===h.entryType)h.initiatorType===e&&(-1!==fo(h.name,c)||-1!==fo(c,h.name))&&(f=h);else if("mark"===h.entryType&&h.name===i.name){t.perfTiming=f;break}if(h.startTime<i.startTime-1e3)break}}}!i||t.perfTiming||u>=a||!1===t.async?(i&&ge(o.clearMarks)&&o.clearMarks(i.name),t.perfAttempts=u,n()):setTimeout(l,s)}catch(e){r(e)}}()}function N(t){var n="";try{fe(t)||(n+="string"==typeof t?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(t){co(e,15,"Failed to grab failed fetch diagnostics message",{exception:ot(t)})}return n}function R(t,n,r,i,o,a){function s(t,n,i){var o=i||{};o.fetchDiagnosticsMessage=N(r),n&&(o.exception=ot(n)),uo(e,t,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",o)}i&&(i.responseFinishedTime=sr(),i.status=n,A("fetch",i,(function(){var t=i.CreateTrackItem("Fetch",m,o);t?e[c](t):s(14,null,{requestSentTime:i.requestSentTime,responseFinishedTime:i.responseFinishedTime})}),(function(e){s(18,e,null)})))}function L(t){if(t&&t.headers)try{var n=t.headers.get(yn);return ar.getCorrelationContext(n)}catch(n){uo(e,18,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:N(t),exception:ot(n)})}}e.initialize=function(h,v,T,N){if(!e.isInitialized()){n.initialize(h,v,T,N);var M=e._getTelCtx();ye(t.getDefaultConfig(),(function(e,n){g[e]=M.getConfig(t.identifier,e,n)}));var D=g.distributedTracingMode;if(m=g.enableRequestHeaderTracking,y=g.enableAjaxPerfTracking,w=g.maxAjaxCallsPerView,x=g.enableResponseHeaderTracking,s=g.excludeRequestFromAutoTrackingPatterns,o=D===Fn.AI||D===Fn.AI_AND_W3C,i=D===Fn.AI_AND_W3C||D===Fn.W3C,y){var U=h.instrumentationKey||"unkwn";a=U.length>5?to+U.substring(U.length-5)+".":to+U+"."}if(!1===g.disableAjaxTracking&&function(e){var t=!1;if(typeof XMLHttpRequest!==d&&!fe(XMLHttpRequest)){var n=XMLHttpRequest[p];t=!(fe(n)||fe(n.open)||fe(n.send)||fe(n.abort))}var r=it();if(r&&r<9&&(t=!1),t)try{(new XMLHttpRequest)[ro]={};var i=XMLHttpRequest[p].open;XMLHttpRequest[p].open=i}catch(n){t=!1,co(e,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:ot(n)})}return t}(e)&&!f&&(b(XMLHttpRequest,"open",{req:function(t,n,i,o){var a=t.inst,s=a[ro];!S(a,i)&&E(a,!0)&&(!s||!s.xhrMonitoringState.openDone)&&function(t,n,i,o){var a=r&&r.telemetryTrace&&r.telemetryTrace.traceID||un(),s=un().substr(0,16),l=new Qi(a,s,e[no]());l.method=n,l.requestUrl=i,l.xhrMonitoringState.openDone=!0,l.requestHeaders={},l.async=o,t[ro]=l,function(t){t[ro].xhrMonitoringState.stateChangeAttached=ln.Attach(t,"readystatechange",(function(){try{t&&4===t.readyState&&E(t)&&function(t){var n=t[ro];function r(n,r){var i=r||{};i.ajaxDiagnosticsMessage=so(t),n&&(i.exception=ot(n)),uo(e,14,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",i)}n.responseFinishedTime=sr(),n.status=t.status,A("xmlhttprequest",n,(function(){try{var i=n.CreateTrackItem("Ajax",m,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:_(t),type:t.responseType,responseText:P(t),response:t.response};if(x){var n=t.getAllResponseHeaders();if(n){var r=_e(n).split(/[\r\n]+/),i={};Se(r,(function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");u(n)&&(i[n]=r)})),e.headerMap=i}}return e}));i?e[c](i):r(null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})}finally{try{t[ro]=null}catch(e){}}}),(function(e){r(e,null)}))}(t)}catch(r){var n=ot(r);(!n||-1===fo(n.toLowerCase(),"c00c023f"))&&co(e,16,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:so(t),exception:n})}}))}(t)}(a,n,i,o)},hkErr:lo(e,15,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),b(XMLHttpRequest,"send",{req:function(t,n){var r=t.inst,i=r[ro];E(r)&&!i.xhrMonitoringState.sendDone&&(k("xhr",i),i.requestSentTime=sr(),e.includeCorrelationHeaders(i,void 0,void 0,r),i.xhrMonitoringState.sendDone=!0)},hkErr:lo(e,17,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),b(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,n=t[ro];E(t)&&!n.xhrMonitoringState.abortDone&&(n.aborted=1,n.xhrMonitoringState.abortDone=!0)},hkErr:lo(e,13,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),m&&b(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){var r=e.inst;E(r)&&u(t)&&(r[ro].requestHeaders[t]=n)},hkErr:lo(e,71,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),f=!0),function(){var t=function(){var e=I();return!e||fe(e.Request)||fe(e.Request[p])||fe(e[oo])?null:e[oo]}();if(t){var n=I(),i=t.polyfill;!1===g.disableFetchTracking?(C.push(vn(n,oo,{req:function(t,n,o){var a;if(l&&!S(null,n,o)&&(!i||!f)){var s=t.ctx();a=function(t,n){var i=r&&r.telemetryTrace&&r.telemetryTrace.traceID||un(),o=un().substr(0,16),a=new Qi(i,o,e[no]());a.requestSentTime=sr(),t instanceof Request?a.requestUrl=t?t.url:"":a.requestUrl=t;var s="GET";n&&n.method?s=n.method:t&&t instanceof Request&&(s=t.method),a.method=s;var c={};return m&&new Headers((n?n.headers:0)||t instanceof Request&&t.headers||{}).forEach((function(e,t){u(t)&&(c[t]=e)})),a.requestHeaders=c,k("fetch",a),a}(n,o);var c=e.includeCorrelationHeaders(a,n,o);c!==o&&t.set(1,c),s.data=a}},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then((function(e){return R(0,(e||{}).status,e,n,(function(){var t={statusText:e.statusText,headerMap:null,correlationContext:L(e)};if(x){var n={};e.headers.forEach((function(e,t){u(t)&&(n[t]=e)})),t.headerMap=n}return t})),e})).catch((function(e){throw R(0,0,t,n,null,e.message),e})))},hkErr:lo(e,15,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),l=!0):i&&C.push(vn(n,oo,{req:function(e,t,n){S(null,t,n)}})),i&&(n[oo].polyfill=i)}}(),T.length>0&&T){for(var F=void 0,O=0;!F&&O<T.length;)T[O]&&T[O].identifier===ti&&(F=T[O]),O++;F&&(r=F.context)}}},e.teardown=function(){Se(C,(function(e){e.rm()})),C=[],l=!1,f=!1,e.setInitialized(!1)},e.trackDependencyData=function(t,n){e[c](t,n)},e.includeCorrelationHeaders=function(t,n,a,s){var c=e._currentWindowHost||h;if(n){if(ar.canIncludeCorrelationHeader(g,t.getAbsoluteUrl(),c)){if(a||(a={}),a.headers=new Headers(a.headers||n instanceof Request&&n.headers||{}),o){var u="|"+t.traceID+"."+t.spanID;a.headers.set(xn,u),m&&(t.requestHeaders["Request-Id"]=u)}if((f=g.appId||r&&r.appId())&&(a.headers.set(yn,wn+f),m&&(t.requestHeaders["Request-Context"]=wn+f)),i){var l=new eo(t.traceID,t.spanID);a.headers.set(In,l.toString()),m&&(t.requestHeaders.traceparent=l.toString())}}return a}if(s){var f;if(ar.canIncludeCorrelationHeader(g,t.getAbsoluteUrl(),c))o&&(u="|"+t.traceID+"."+t.spanID,s.setRequestHeader(xn,u),m&&(t.requestHeaders["Request-Id"]=u)),(f=g.appId||r&&r.appId())&&(s.setRequestHeader(yn,wn+f),m&&(t.requestHeaders["Request-Context"]=wn+f)),i&&(l=new eo(t.traceID,t.spanID),s.setRequestHeader(In,l.toString()),m&&(t.requestHeaders.traceparent=l.toString()));return s}},e[c]=function(t,n,r){if(-1===w||v<w){(g.distributedTracingMode===Fn.W3C||g.distributedTracingMode===Fn.AI_AND_W3C)&&"string"==typeof t.id&&"."!==t.id[t.id.length-1]&&(t.id+="."),fe(t.startTime)&&(t.startTime=new Date);var i=Xr.create(t,Dr.dataType,Dr.envelopeType,e[no](),n,r);e.core.track(i)}else v===w&&co(e,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++v}})),n}return E(t,e),t.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:Fn.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]}},t.getEmptyConfig=function(){var e=this.getDefaultConfig();return ye(e,(function(t){e[t]=void 0})),e},t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.identifier="AjaxDependencyPlugin",t}(wt),go=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],mo=function(){function e(e){var t=this;t._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var n=e.config||{};if(n.connectionString){var r=function(e){if(!e)return{};var t=function(e,t,n){var r,i=e.length,o=0;if(arguments.length>=3)r=arguments[2];else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++;return r}(e.split(";"),(function(e,t){var n=t.split("=");if(2===n.length){var r=n[0].toLowerCase(),i=n[1];e[r]=i}return e}),{});if(Ne(t).length>0){if(t.endpointsuffix){var n=t.location?t.location+".":"";t.ingestionendpoint=t.ingestionendpoint||"https://"+n+"dc."+t.endpointsuffix}t.ingestionendpoint=t.ingestionendpoint||"https://dc.services.visualstudio.com"}return t}(n.connectionString),i=r.ingestionendpoint;n.endpointUrl=i?i+"/v2/track":n.endpointUrl,n.instrumentationKey=r.instrumentationkey||n.instrumentationKey}t.appInsights=new li,t.properties=new $i,t.dependencies=new ho,t.core=new Qt,t._sender=new Li,t.snippet=e,t.config=n,t.getSKUDefaults()}return e.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},e.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},e.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},e.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},e.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},e.prototype._onerror=function(e){this.appInsights._onerror(e)},e.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},e.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},e.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,r){this.appInsights.stopTrackPage(e,t,n,r)},e.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},e.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},e.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},e.prototype.flush=function(e){var t=this;void 0===e&&(e=!0),pt(this.core,(function(){return"AISKU.flush"}),(function(){Se(t.core.getTransmissionControls(),(function(t){Se(t,(function(t){t.flush(e)}))}))}),null,e)},e.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),Se(this.core.getTransmissionControls(),(function(t){Se(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},e.prototype.loadAppInsights=function(e,t,n){var r=this;void 0===e&&(e=!1);var i=this;return e&&i.config.extensions&&i.config.extensions.length>0&&Ve("Extensions not allowed in legacy mode"),pt(i.core,(function(){return"AISKU.loadAppInsights"}),(function(){var o=[];o.push(i._sender),o.push(i.properties),o.push(i.dependencies),o.push(i.appInsights),i.core.initialize(i.config,o,t,n),i.context=i.properties.context,po&&i.context&&(i.context.internal.sdkSrc=po),function(t){if(t){var n="";fe(i._snippetVersion)||(n+=i._snippetVersion),e&&(n+=".lg"),i.context&&i.context.internal&&(i.context.internal.snippetVer=n||"-"),ye(i,(function(e,n){Ce(e)&&!ge(n)&&e&&"_"!==e[0]&&-1===go.indexOf(e)&&(t[e]=n)}))}}(i.snippet),i.emptyQueue(),i.pollInternalLogs(),i.addHousekeepingBeforeUnload(r)})),i},e.prototype.updateSnippetDefinitions=function(e){!function(e,t,n){if(e&&t&&e!==t&&he(e)&&he(t)){var r=function(r){if(Ce(r)){var i=t[r];ge(i)?(!n||n(r))&&(e[r]=(o=r,function(){var e=arguments;return t[o].apply(t,e)})):(!n||n(r))&&(pe(e,r)&&delete e[r],Re(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}var o};for(var i in t)r(i)}}(e,this,(function(e){return e&&-1===go.indexOf(e)}))},e.prototype.emptyQueue=function(){var e=this;try{if(xe(e.snippet.queue)){for(var t=e.snippet.queue.length,n=0;n<t;n++)(0,e.snippet.queue[n])();e.snippet.queue=void 0,delete e.snippet.queue}}catch(e){e&&ge(e.toString)&&e.toString()}},e.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},e.prototype.addHousekeepingBeforeUnload=function(e){if(We()||Je()){var t=function(){e.onunloadFlush(!1),Se(e.appInsights.core._extensions,(function(e){if(e.identifier===ti)return e&&e.context&&e.context._sessionManager&&e.context._sessionManager.backup(),-1}))};if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=sn("beforeunload",t);n=sn("unload",t)||n,n=sn("pagehide",t)||n,!(n=sn("visibilitychange",t)||n)&&!function(){var e=Ze();return!(!e||!e.product)&&"ReactNative"===e.product}()&&e.appInsights.core.logger.throwInternal(ee.CRITICAL,19,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||(sn("pagehide",t),sn("visibilitychange",t))}},e.prototype.getSender=function(){return this._sender},e.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},e}();!function(){var e=null,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(e){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",o=0;o<t.length;o++)if(-1!==r.indexOf(t[o])){i="cdn"+(o+1),-1===r.indexOf("/scripts/")&&(-1!==r.indexOf("/next/")?i+="-next":-1!==r.indexOf("/beta/")&&(i+="-beta")),po=i+"";break}}catch(e){}}();var vo=class{constructor(e,t,n,i,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=n,this.osShim=i,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!o,this.updateUserOptStatus(),void 0!==r.env.onDidChangeTelemetryEnabled?this.optOutListener=r.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus())):this.optOutListener=r.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=r.workspace.getConfiguration(vo.TELEMETRY_CONFIG_ID),t=void 0===r.env.isTelemetryEnabled?e.get(vo.TELEMETRY_CONFIG_ENABLED_ID,!0):r.env.isTelemetryEnabled;this.userOptIn!==t&&(this.userOptIn=t)}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach((n=>{0===e.indexOf(`${n}+`)&&(t=n)})),t}get extension(){return void 0===this._extension&&(this._extension=r.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let n={};for(let r in e)n[r]=t(r,e[r]);return n}shouldSendErrorTelemetry(){return!this.firstParty||"other"!==this.cleanRemoteName(r.env.remoteName)||!(void 0===this.extension||this.extension.extensionKind===r.ExtensionKind.Workspace||r.env.uiKind===r.UIKind.Web)}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,r&&r.env){switch(e["common.vscodemachineid"]=r.env.machineId,e["common.vscodesessionid"]=r.env.sessionId,e["common.vscodeversion"]=r.version,e["common.isnewappinstall"]=r.env.isNewAppInstall.toString(),r.env.uiKind){case r.UIKind.Web:e["common.uikind"]="web";break;case r.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(r.env.remoteName)}return e}anonymizeFilePaths(e,t){let n;if(null==e)return"";let i=[];""!==r.env.appRoot&&i.push(new RegExp(r.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&i.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e;if(t){let t=[];for(let r of i)for(;(n=r.exec(e))&&n;)t.push([n.index,r.lastIndex]);let r=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,s=0;for(o="";(n=a.exec(e))&&n;)n[0]&&!r.test(n[0])&&t.every((([e,t])=>n.index<e||n.index>=t))&&(o+=e.substring(s,n.index)+"<REDACTED: user-file-path>",s=a.lastIndex);s<e.length&&(o+=e.substr(s))}for(let e of i)o=o.replace(e,"");return o}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t=Object.create(null);for(let n of Object.keys(e)){let r=e[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(r.toLowerCase())?t[n]="<REDACTED: secret>":i.test(r)?t[n]="<REDACTED: email>":t[n]=r}return t}sendTelemetryEvent(e,t,n){if(this.userOptIn&&""!==e){t=u(u({},t),this.getCommonProperties());let r=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(r),measurements:n})}}sendTelemetryErrorEvent(e,t,n,r){if(this.userOptIn&&""!==e){t=u(u({},t),this.getCommonProperties());let i=this.cloneAndChange(t,((e,t)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(t,this.firstParty):void 0===r||-1!==r.indexOf(e)?"REDACTED":this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:n})}}sendTelemetryException(e,t,n){if(this.shouldSendErrorTelemetry()&&this.userOptIn&&e){t=u(u({},t),this.getCommonProperties());let r=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(r),measurements:n})}}dispose(){return this.telemetryAppender.flush(),this.optOutListener.dispose()}},yo=vo;yo.TELEMETRY_CONFIG_ID="telemetry",yo.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry";var wo=class extends yo{constructor(e,t,n,i){let o=new class{constructor(e){let t;e&&0===e.indexOf("AIF-")&&(t="https://vortex.data.microsoft.com/collect/v1"),this._aiClient=new mo({config:{instrumentationKey:e,endpointUrl:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0,disableInstrumentationKeyValidation:!0}}),this._aiClient.loadAppInsights(),t&&r.env.isTelemetryEnabled&&fetch(t).catch((()=>this._aiClient=void 0))}logEvent(e,t){!this._aiClient||this._aiClient.trackEvent({name:e},u(u({},t.properties),t.measurements))}logException(e,t){!this._aiClient||this._aiClient.trackException({exception:e,properties:u(u({},t.properties),t.measurements)})}flush(){return this._aiClient&&(this._aiClient.flush(),this._aiClient=void 0),Promise.resolve(void 0)}}(n);n&&0===n.indexOf("AIF-")&&(i=!0),super(e,t,o,{release:navigator.appVersion,platform:"web"},i)}}},189:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=void 0;var i=n(1926),o=n(800),a=n(800);function s(e){return function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if("number"==typeof e)throw new Error("Browser implementation does currently not support externalized strings.");return o.localize.apply(void 0,r([e,t],n))}}function c(e){return o.setPseudo("pseudo"===(null==e?void 0:e.locale.toLowerCase())),s}Object.defineProperty(t,"MessageFormat",{enumerable:!0,get:function(){return a.MessageFormat}}),Object.defineProperty(t,"BundleFormat",{enumerable:!0,get:function(){return a.BundleFormat}}),t.loadMessageBundle=s,t.config=c,i.default.install(Object.freeze({loadMessageBundle:s,config:c}))},800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.localize=t.format=t.setPseudo=t.isPseudo=t.isDefined=t.BundleFormat=t.MessageFormat=void 0;var r,i,o,a=n(1926);function s(e){return void 0!==e}function c(e,n){return t.isPseudo&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===n.length?e:e.replace(/\{(\d+)\}/g,(function(e,t){var r=t[0],i=n[r],o=e;return"string"==typeof i?o=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(o=String(i)),o}))}(o=t.MessageFormat||(t.MessageFormat={})).file="file",o.bundle="bundle",o.both="both",(i=t.BundleFormat||(t.BundleFormat={})).standalone="standalone",i.languagePack="languagePack",function(e){e.is=function(e){var t=e;return t&&s(t.key)&&s(t.comment)}}(r||(r={})),t.isDefined=s,t.isPseudo=!1,t.setPseudo=function(e){t.isPseudo=e},t.format=c,t.localize=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return c(t,n)},t.loadMessageBundle=function(e){return a.default().loadMessageBundle(e)},t.config=function(e){return a.default().config(e)}},1926:(e,t)=>{"use strict";var n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},9035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5654);t.getExperimentationService=r.getExperimentationService,t.getExperimentationServiceAsync=r.getExperimentationServiceAsync;var i=n(2560);t.TargetPopulation=i.TargetPopulation},5708:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},4619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,t){}getTreatmentVariableAsync(e,t){return Promise.resolve(void 0)}}},2560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7549);class i{constructor(e,t,n){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=n}static trimVersionSuffix(e){return e.split(/\-[a-zA-Z0-9]+$/)[0]}getFilterValue(e){switch(e){case o.ApplicationVersion:return i.trimVersionSuffix(r.version);case o.Build:return r.env.appName;case o.ClientId:return r.env.machineId;case o.ExtensionName:return this.extensionName;case o.ExtensionVersion:return i.trimVersionSuffix(this.extensionVersion);case o.Language:return r.env.language;case o.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(o);for(let n of t)e.set(n,this.getFilterValue(n));return e}}var o,a;t.VSCodeFilterProvider=i,function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(o=t.Filters||(t.Filters={})),(a=t.TargetPopulation||(t.TargetPopulation={})).Team="team",a.Internal="internal",a.Insiders="insider",a.Public="public"},5654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2560),i=n(4802),o=n(7549),a=n(5708),s=n(4619);function c(e,t,n,c,u,...l){if(!u)throw new Error("Memento storage was not provided.");const f=o.workspace.getConfiguration("telemetry");if(!(void 0===o.env.isTelemetryEnabled?f.get("enableTelemetry",!0):o.env.isTelemetryEnabled))return new s.default;const d=[new r.VSCodeFilterProvider(e,t,n),...l],p=new a.MementoKeyValueStorage(u);return new i.ExperimentationService({filterProviders:d,telemetry:c,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:p,featuresTelemetryPropertyName:"VSCode.ABExp.Features",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=c,t.getExperimentationServiceAsync=async function(e,t,n,r,i,...o){const a=c(e,t,n,r,i,...o);return await a.initializePromise,a}},4443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keychain=void 0;const r=n(7549),i=n(189).loadMessageBundle();t.Keychain=class{constructor(e,t,n){this.context=e,this.serviceId=t,this.Logger=n}async setToken(e){try{return await this.context.secrets.store(this.serviceId,e)}catch(e){this.Logger.error(`Setting token failed: ${e}`);const t=i("troubleshooting","Troubleshooting Guide");await r.window.showErrorMessage(i("keychainWriteError","Writing login information to the keychain failed with error '{0}'.",e.message),t)===t&&r.env.openExternal(r.Uri.parse("https://code.visualstudio.com/docs/editor/settings-sync#_troubleshooting-keychain-issues"))}}async getToken(){try{const e=await this.context.secrets.get(this.serviceId);return e&&"[]"!==e&&this.Logger.trace("Token acquired from secret storage."),e}catch(e){return this.Logger.error(`Getting token failed: ${e}`),Promise.resolve(void 0)}}async deleteToken(){try{return await this.context.secrets.delete(this.serviceId)}catch(e){return this.Logger.error(`Deleting token failed: ${e}`),Promise.resolve(void 0)}}async tryMigrate(){try{const e=function(){try{return n(6183)}catch(e){console.log(e)}}();if(!e)throw new Error("keytar unavailable");const t=await e.getPassword(`${r.env.uriScheme}-github.login`,"account");return t&&(this.Logger.trace("Attempting to migrate from keytar to secret store..."),await this.setToken(t),await e.deletePassword(`${r.env.uriScheme}-github.login`,"account")),t}catch(e){return Promise.resolve(void 0)}}}},5852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;const r=n(7549),i=n(1126);function o(e,t,n=" "){return n.repeat(Math.max(0,t-e.length))+e}t.Log=class{constructor(e){this.type=e;const t=this.type===i.AuthProviderType.github?"GitHub":"GitHub Enterprise";this.output=r.window.createOutputChannel(`${t} Authentication`)}data2String(e){return e instanceof Error?e.stack||e.message:!1===e.success&&e.message?e.message:e.toString()}trace(e,t){this.logLevel("Trace",e,t)}info(e,t){this.logLevel("Info",e,t)}error(e,t){this.logLevel("Error",e,t)}logLevel(e,t,n){this.output.appendLine(`[${e}  - ${this.now()}] ${t}`),n&&this.output.appendLine(this.data2String(n))}now(){const e=new Date;return o(e.getUTCHours()+"",2,"0")+":"+o(e.getMinutes()+"",2,"0")+":"+o(e.getUTCSeconds()+"",2,"0")+"."+e.getMilliseconds()}}},4669:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=t.arrayEquals=t.promiseFromEvent=t.onceEvent=t.filterEvent=void 0;const r=n(7549);t.filterEvent=function(e,t){return(n,r=null,i)=>e((e=>t(e)&&n.call(r,e)),null,i)},t.onceEvent=function(e){return(t,n=null,r)=>{const i=e((e=>(i.dispose(),t.call(n,e))),null,r);return i}};const i=(e,t)=>t(e);t.promiseFromEvent=function(e,t=i){let n,o=new r.EventEmitter;return{promise:new Promise(((r,i)=>{o.event((e=>i())),n=e((e=>{try{Promise.resolve(t(e,r,i)).catch(i)}catch(e){i(e)}}))})).then((e=>(n.dispose(),e)),(e=>{throw n.dispose(),e})),cancel:o}},t.arrayEquals=function(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(!n(e[r],t[r]))return!1;return!0},t.StopWatch=class{constructor(){this._startTime=Date.now(),this._stopTime=-1}stop(){this._stopTime=Date.now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:Date.now()-this._startTime}}},6007:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationTelemetry=void 0;const r=n(7549),i=n(9035);t.ExperimentationTelemetry=class{constructor(e,t){this.context=e,this.baseReporter=t,this.sharedProperties={}}async createExperimentationService(){let e;switch(r.env.uriScheme){case"vscode":e=i.TargetPopulation.Public;case"vscode-insiders":e=i.TargetPopulation.Insiders;case"vscode-exploration":e=i.TargetPopulation.Internal;case"code-oss":e=i.TargetPopulation.Team;default:e=i.TargetPopulation.Public}const t=this.context.extension.id,n=this.context.extension.packageJSON.version,o=(0,i.getExperimentationService)(t,n,e,this,this.context.globalState);return await o.initialFetch,o}async sendTelemetryEvent(e,t,n){this.experimentationServicePromise||(this.experimentationServicePromise=this.createExperimentationService()),await this.experimentationServicePromise,this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...t},n)}async sendTelemetryErrorEvent(e,t,n){this.experimentationServicePromise||(this.experimentationServicePromise=this.createExperimentationService()),await this.experimentationServicePromise,this.baseReporter.sendTelemetryErrorEvent(e,{...this.sharedProperties,...t})}setSharedProperty(e,t){this.sharedProperties[e]=t}postEvent(e,t){const n={};for(const[e,r]of t)n[e]=r;this.sendTelemetryEvent(e,n)}dispose(){return this.baseReporter.dispose()}}},1126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitHubAuthenticationProvider=t.AuthProviderType=void 0;const r=n(7549),i=n(3234),o=n(4443),a=n(3475),s=n(4669),c=n(6007),u=n(2374),l=n(5852);var f;!function(e){e.github="github",e.githubEnterprise="github-enterprise"}(f=t.AuthProviderType||(t.AuthProviderType={})),t.GitHubAuthenticationProvider=class{constructor(e,t){this.context=e,this.type=t,this._sessionChangeEmitter=new r.EventEmitter,this._logger=new l.Log(this.type),this._keychain=new o.Keychain(this.context,`${this.type}.auth`,this._logger);const{name:n,version:i,aiKey:s}=e.extension.packageJSON;this._telemetryReporter=new c.ExperimentationTelemetry(e,new u.default(n,i,s)),this.type===f.github?this._githubServer=new a.GitHubServer(this._logger,this._telemetryReporter):this._githubServer=new a.GitHubEnterpriseServer(this._logger,this._telemetryReporter),this._sessionsPromise=this.readSessions(),this._disposable=r.Disposable.from(this._telemetryReporter,this._githubServer,r.authentication.registerAuthenticationProvider(t,this._githubServer.friendlyName,this,{supportsMultipleAccounts:!1}),this.context.secrets.onDidChange((()=>this.checkForUpdates())))}dispose(){this._disposable.dispose()}get onDidChangeSessions(){return this._sessionChangeEmitter.event}async getSessions(e){this._logger.info(`Getting sessions for ${e?.join(",")||"all scopes"}...`);const t=await this._sessionsPromise,n=e?t.filter((t=>(0,s.arrayEquals)([...t.scopes].sort(),e.sort()))):t;return this._logger.info(`Got ${n.length} sessions for ${e?.join(",")||"all scopes"}...`),n}async afterTokenLoad(e){this._githubServer.sendAdditionalTelemetryInfo(e)}async checkForUpdates(){const e=await this._sessionsPromise;this._sessionsPromise=this.readSessions();const t=await this._sessionsPromise,n=[],r=[];t.forEach((t=>{e.some((e=>e.id===t.id))||(this._logger.info("Adding session found in keychain"),n.push(t))})),e.forEach((e=>{t.some((t=>t.id===e.id))||(this._logger.info("Removing session no longer found in keychain"),r.push(e))})),(n.length||r.length)&&this._sessionChangeEmitter.fire({added:n,removed:r,changed:[]})}async readSessions(){let e;try{this._logger.info("Reading sessions from keychain...");const t=await this._keychain.getToken()||await this._keychain.tryMigrate();if(!t)return[];this._logger.info("Got stored sessions!");try{e=JSON.parse(t)}catch(e){throw await this._keychain.deleteToken(),e}}catch(e){return this._logger.error(`Error reading token: ${e}`),[]}const t=e.map((async e=>{let t;if(!e.account)try{t=await this._githubServer.getUserInfo(e.accessToken),this._logger.info(`Verified session with the following scopes: ${e.scopes}`)}catch(e){if("Unauthorized"===e.message)return}return setTimeout((()=>this.afterTokenLoad(e.accessToken)),1e3),this._logger.trace(`Read the following session from the keychain with the following scopes: ${e.scopes}`),{id:e.id,account:{label:e.account?e.account.label??e.account.displayName??"<unknown>":t?.accountName??"<unknown>",id:e.account?.id??t?.id??"<unknown>"},scopes:e.scopes,accessToken:e.accessToken}})),n=(await Promise.allSettled(t)).filter((e=>"fulfilled"===e.status)).map((e=>e.value)).filter((e=>Boolean(e)));return this._logger.info(`Got ${n.length} verified sessions.`),n.length!==e.length&&await this.storeSessions(n),n}async storeSessions(e){this._logger.info(`Storing ${e.length} sessions...`),this._sessionsPromise=Promise.resolve(e),await this._keychain.setToken(JSON.stringify(e)),this._logger.info(`Stored ${e.length} sessions!`)}async createSession(e){try{this._telemetryReporter?.sendTelemetryEvent("login",{scopes:JSON.stringify(e)});const t=await this._githubServer.login(e.join(" "));this.afterTokenLoad(t);const n=await this.tokenToSession(t,e),r=await this._sessionsPromise,i=r.findIndex((e=>e.id===n.id));return i>-1?r.splice(i,1,n):r.push(n),await this.storeSessions(r),this._sessionChangeEmitter.fire({added:[n],removed:[],changed:[]}),this._logger.info("Login success!"),n}catch(e){if("Cancelled"===e)throw this._telemetryReporter?.sendTelemetryEvent("loginCancelled"),e;throw this._telemetryReporter?.sendTelemetryEvent("loginFailed"),r.window.showErrorMessage(`Sign in failed: ${e}`),this._logger.error(e),e}}async tokenToSession(e,t){const n=await this._githubServer.getUserInfo(e);return{id:(0,i.v4)(),accessToken:e,account:{label:n.accountName,id:n.id},scopes:t}}async removeSession(e){try{this._telemetryReporter?.sendTelemetryEvent("logout"),this._logger.info(`Logging out of ${e}`);const t=await this._sessionsPromise,n=t.findIndex((t=>t.id===e));if(n>-1){const e=t[n];t.splice(n,1),await this.storeSessions(t),this._sessionChangeEmitter.fire({added:[],removed:[e],changed:[]})}else this._logger.error("Session not found")}catch(e){throw this._telemetryReporter?.sendTelemetryEvent("logoutFailed"),r.window.showErrorMessage(`Sign out failed: ${e}`),this._logger.error(e),e}}}},3475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitHubEnterpriseServer=t.GitHubServer=void 0;const r=n(189),i=n(7549),o=n(3300),a=n(3234),s=n(4669),c=n(1126),u=r.loadMessageBundle(),l="network error",f="vscode-auth.github.com";class d extends i.EventEmitter{constructor(e){super(),this.Logger=e}handleUri(e){this.Logger.trace("Handling Uri..."),this.fire(e)}}async function p(e,t,n){try{n.info("Getting token scopes...");const r=await(0,o.default)(t.toString(),{headers:{Authorization:`token ${e}`,"User-Agent":"Visual-Studio-Code"}});if(r.ok){const e=r.headers.get("X-OAuth-Scopes");return e?e.split(",").map((e=>e.trim())):[]}throw n.error(`Getting scopes failed: ${r.statusText}`),new Error(r.statusText)}catch(e){throw n.error(e.message),new Error(l)}}async function h(e,t,n){let r;try{n.info("Getting user info..."),r=await(0,o.default)(t.toString(),{headers:{Authorization:`token ${e}`,"User-Agent":"Visual-Studio-Code"}})}catch(e){throw n.error(e.message),new Error(l)}if(r.ok){const e=await r.json();return n.info("Got account info!"),{id:e.id,accountName:e.login}}throw n.error(`Getting account info failed: ${r.statusText}`),new Error(r.statusText)}t.GitHubServer=class{constructor(e,t){this._logger=e,this._telemetryReporter=t,this.friendlyName="GitHub",this.type=c.AuthProviderType.github,this._onDidManuallyProvideToken=new i.EventEmitter,this._pendingStates=new Map,this._codeExchangePromises=new Map,this._statusBarCommandId=`${this.type}.provide-manually`,this._uriHandler=new d(this._logger),this.exchangeCodeForToken=e=>async(t,n,r)=>{const a=function(e){return e.query.split("&").reduce(((e,t)=>{const n=t.split("=");return e[n[0]]=n[1],e}),{})}(t),s=a.code;if(!(this._pendingStates.get(e)||[]).includes(a.state))return void this._logger.info("State not found in accepted state. Skipping this execution...");const c=`https://${f}/token?code=${s}&state=${a.state}`;if(this._logger.info("Exchanging code for token..."),a.nocors)try{const e=await i.commands.executeCommand("_workbench.fetchJSON",c,"POST");this._logger.info("Token exchange success!"),n(e.access_token)}catch(e){r(e)}else try{const e=await(0,o.default)(c,{method:"POST",headers:{Accept:"application/json"}});if(e.ok){const t=await e.json();this._logger.info("Token exchange success!"),n(t.access_token)}else r(e.statusText)}catch(e){r(e)}},this._disposable=i.Disposable.from(i.commands.registerCommand(this._statusBarCommandId,(()=>this.manuallyProvideUri())),i.window.registerUriHandler(this._uriHandler))}dispose(){this._disposable.dispose()}isTestEnvironment(e){return/\.azurewebsites\.net$/.test(e.authority)||e.authority.startsWith("localhost:")}async isNoCorsEnvironment(){const e=await i.env.asExternalUri(i.Uri.parse(`${i.env.uriScheme}://vscode.github-authentication/dummy`));return"https"===e.scheme&&/^(vscode|github)\./.test(e.authority)||"http"===e.scheme&&/^localhost/.test(e.authority)}async login(e){this._logger.info(`Logging in for the following scopes: ${e}`);const t=await this.isNoCorsEnvironment(),n=await i.env.asExternalUri(i.Uri.parse(`${i.env.uriScheme}://vscode.github-authentication/did-authenticate${t?"?nocors=true":""}`));if(this.isTestEnvironment(n)){const t=await i.window.showInputBox({prompt:"GitHub Personal Access Token",ignoreFocusOut:!0});if(!t)throw new Error("Sign in failed: No token provided");const n=await p(t,this.getServerUri("/"),this._logger);if(!e.split(" ").every((e=>{const t=n.includes(e);return t||!e.includes(":")?t:e.split(":").some((e=>n.includes(e)))})))throw new Error(`The provided token is does not match the requested scopes: ${e}`);return t}this.updateStatusBarItem(!0);const r=(0,a.v4)(),o=this._pendingStates.get(e)||[];this._pendingStates.set(e,[...o,r]);const c=i.Uri.parse(`https://${f}/authorize/?callbackUri=${encodeURIComponent(n.toString())}&scope=${e}&state=${r}&responseType=code&authServer=https://github.com${t?"&nocors=true":""}`);await i.env.openExternal(c);let u=this._codeExchangePromises.get(e);return u||(u=(0,s.promiseFromEvent)(this._uriHandler.event,this.exchangeCodeForToken(e)),this._codeExchangePromises.set(e,u)),Promise.race([u.promise,(0,s.promiseFromEvent)(this._onDidManuallyProvideToken.event,((e,t,n)=>{e?t(e):n("Cancelled")})).promise,new Promise(((e,t)=>setTimeout((()=>t("Cancelled")),6e4)))]).finally((()=>{this._pendingStates.delete(e),u?.cancel.fire(),this._codeExchangePromises.delete(e),this.updateStatusBarItem(!1)}))}getServerUri(e=""){const t=i.Uri.parse("https://api.github.com");return i.Uri.parse(`${t.scheme}://${t.authority}${e}`)}updateStatusBarItem(e){e&&!this._statusBarItem&&(this._statusBarItem=i.window.createStatusBarItem("status.git.signIn",i.StatusBarAlignment.Left),this._statusBarItem.name=u("status.git.signIn.name","GitHub Sign-in"),this._statusBarItem.text=u("signingIn","$(mark-github) Signing in to github.com..."),this._statusBarItem.command=this._statusBarCommandId,this._statusBarItem.show()),!e&&this._statusBarItem&&(this._statusBarItem.dispose(),this._statusBarItem=void 0)}async manuallyProvideUri(){const e=await i.window.showInputBox({prompt:"Uri",ignoreFocusOut:!0,validateInput(e){if(!e)return;const t=u("validUri","Please enter a valid Uri from the GitHub login page.");try{const n=i.Uri.parse(e.trim());if(!n.scheme||"file"===n.scheme)return t}catch(e){return t}}});e&&this._uriHandler.handleUri(i.Uri.parse(e.trim()))}getUserInfo(e){return h(e,this.getServerUri("/user"),this._logger)}async sendAdditionalTelemetryInfo(e){if(!await this.isNoCorsEnvironment())try{const t=await(0,o.default)("https://education.github.com/api/user",{headers:{Authorization:`token ${e}`,"faculty-check-preview":"true","User-Agent":"Visual-Studio-Code"}});if(t.ok){const e=await t.json();this._telemetryReporter.sendTelemetryEvent("session",{isEdu:e.student?"student":e.faculty?"faculty":"none"})}}catch(e){}}async checkEnterpriseVersion(e){try{const t=await(0,o.default)(this.getServerUri("/meta").toString(),{headers:{Authorization:`token ${e}`,"User-Agent":"Visual-Studio-Code"}});if(!t.ok)return;const n=await t.json();this._telemetryReporter.sendTelemetryEvent("ghe-session",{version:n.installed_version})}catch{}}},t.GitHubEnterpriseServer=class{constructor(e,t){this._logger=e,this.telemetryReporter=t,this.friendlyName="GitHub Enterprise",this.type=c.AuthProviderType.githubEnterprise,this._onDidManuallyProvideToken=new i.EventEmitter,this._statusBarCommandId="github-enterprise.provide-manually",this._disposable=i.commands.registerCommand(this._statusBarCommandId,(async()=>{const e=await i.window.showInputBox({prompt:"Token",ignoreFocusOut:!0});this._onDidManuallyProvideToken.fire(e)}))}dispose(){this._disposable.dispose()}async login(e){this._logger.info(`Logging in for the following scopes: ${e}`);const t=await i.window.showInputBox({prompt:"GitHub Personal Access Token",ignoreFocusOut:!0});if(!t)throw new Error("Sign in failed: No token provided");const n=await p(t,this.getServerUri("/"),this._logger);if(!e.split(" ").every((e=>{const t=n.includes(e);return t||!e.includes(":")?t:e.split(":").some((e=>n.includes(e)))})))throw new Error(`The provided token is does not match the requested scopes: ${e}`);return t}getServerUri(e=""){const t=i.Uri.parse(i.workspace.getConfiguration("github-enterprise").get("uri")||"",!0);return i.Uri.parse(`${t.scheme}://${t.authority}/api/v3${e}`)}async getUserInfo(e){return h(e,this.getServerUri("/user"),this._logger)}async sendAdditionalTelemetryInfo(e){try{const t=await(0,o.default)(this.getServerUri("/meta").toString(),{headers:{Authorization:`token ${e}`,"User-Agent":"Visual-Studio-Code"}});if(!t.ok)return;const n=await t.json();this.telemetryReporter.sendTelemetryEvent("ghe-session",{version:n.installed_version})}catch{}}}},6183:e=>{"use strict";e.exports=require("keytar")},7549:e=>{"use strict";e.exports=require("vscode")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const t=n(7549),i=n(1126);e.activate=function(e){let n;e.subscriptions.push(new i.GitHubAuthenticationProvider(e,i.AuthProviderType.github)),t.workspace.getConfiguration().get("github-enterprise.uri")&&(n=new i.GitHubAuthenticationProvider(e,i.AuthProviderType.githubEnterprise),e.subscriptions.push(n)),e.subscriptions.push(t.workspace.onDidChangeConfiguration((async r=>{r.affectsConfiguration("github-enterprise.uri")&&!n&&t.workspace.getConfiguration().get("github-enterprise.uri")&&(n=new i.GitHubAuthenticationProvider(e,i.AuthProviderType.githubEnterprise),e.subscriptions.push(n))})))}})();var i=exports;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/23cffa27b806f9e1733e15d611ec251dcdba2c42/extensions/github-authentication/dist/browser/extension.js.map